<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta property="twitter:card" content="summary_large_image"/><link rel="shortcut icon" type="image/svg" href="https://graphql-engine-cdn.hasura.io/img/hasura_icon_black.svg"/><noscript></noscript><meta name="generator" content="Gatsby 3.4.1"/><link rel="sitemap" type="application/xml" href="/sitemap/sitemap-index.xml"/><title data-react-helmet="true"></title><link data-react-helmet="true" rel="canonical" href="https://taroguru.github.io/study/202230408-ckad2"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-165706088-1"></script><script>
    window.GATSBY_GTAG_PLUGIN_GA_TRACKING_ID = (
      'UA-165706088-1'
    );
    window.GATSBY_GTAG_PLUGIN_ANONYMIZE = false;

    var options = {
      send_page_view: false
    };
    if (false) {
      options.anonymize_ip = true;
    }

    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    window.gtag = gtag;
    gtag('js', new Date());
    gtag('config', 'UA-165706088-1', options);
  </script><link as="script" rel="preload" href="/webpack-runtime-40d2b6db0d9a9a7357b7.js"/><link as="script" rel="preload" href="/framework-bb601ffbbd122d5c0b0b.js"/><link as="script" rel="preload" href="/app-d7fe63b823d7416d3b5d.js"/><link as="fetch" rel="preload" href="/page-data/study/202230408-ckad2/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/3706406642.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/3721004558.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/417421954.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div><style data-emotion="css-global 1tk16rs">@import url('https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap');@import url('https://fonts.googleapis.com/css?family=Poppins:300,400,500,600&display=swap');*{margin:0;padding:0;box-sizing:border-box;font-display:swap;}::-webkit-input-placeholder{color:#c2c2c2;}:-ms-input-placeholder{color:#c2c2c2;}::-webkit-input-placeholder{color:#c2c2c2;}::-moz-placeholder{color:#c2c2c2;}:-ms-input-placeholder{color:#c2c2c2;}::placeholder{color:#c2c2c2;}html,body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI','Roboto','Roboto Light','Oxygen','Ubuntu','Cantarell','Fira Sans','Droid Sans','Helvetica Neue',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-size:16px;scroll-behavior:smooth;}a{-webkit-transition:color 0.15s;transition:color 0.15s;}body{font-family:'Roboto';}.visibleMobile{display:none;}.visibleMobileView{display:none!important;}.video-responsive{position:relative;padding-bottom:56.2%;}a{-webkit-text-decoration:none;text-decoration:none;}a:hover{-webkit-text-decoration:none;text-decoration:none;}.displayInline{display:inline-block;}.navBarToggle{border:0px solid #fff;border-radius:4px;width:36px;height:33px;position:absolute;right:20px;padding:8px 5px;display:none;}.navBarToggle .iconBar{display:block;width:22px;height:2px;border-radius:1px;margin:0 auto;margin-top:4px;background-color:#001934;}.navBarToggle .iconBar:first-child{margin-top:0px;}.video-responsive iframe{position:absolute;width:100%;height:100%;}.diffNewLine{color:#22863a;background-color:#f0fff4;}.diffRemoveLine{color:red;background-color:#ffcccc;}.navBarParent{width:100%;float:left;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}.divider{height:30px;margin:0 15px;border-right:1px solid rgba(255, 255, 255, 0.3);}.githubIcon{width:15px;margin-right:5px;}.githubSection{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:#000;opacity:0.7;}.githubSection:hover{-webkit-text-decoration:none;text-decoration:none;opacity:1;}.navbar-default .navbar-toggle .icon-bar{background-color:#fff!important;}.navbar-default .navbar-toggle:focus,.navbar-default .navbar-toggle:hover{background-color:#001933;}.headerWrapper{border-bottom:1px solid rgb(212, 218, 223);box-shadow:rgba(116, 129, 141, 0.1) 0px 1px 1px 0px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}.formElement{background-color:transparent;padding:4px;border-radius:5px;position:relative;}.formElement:focus{outline:none;border:none;}.formElement svg path{fill:#2fd2c5;}.searchInput{width:100%;background-color:rgba(28,211,198,.12)!important;border-width:0!important;color:#C2C2C2;padding:10px;border-radius:5px;color:#fff;opacity:.6;padding-left:38px;max-width:600px;}.searchInput:focus,.searchInput:visited,.searchInput:hover,.searchInput:focus-within{outline:none;border:0;}.searchWrapper{padding-left:0px;padding-right:20px;-webkit-flex:1;-ms-flex:1;flex:1;position:relative;}.searchWrapper a{font-weight:500;}.hitWrapper{background-color:#fff;padding:0.7em 1em 0.4em;border-radius:4px;position:absolute;width:80vw;max-width:30em;top:40px;border:1px solid #ccc;box-shadow:0 1px 4px 0 rgba(0, 0, 0, 0.16);height:auto;max-height:80vh;overflow:scroll;left:0;}.hitWrapper ul li{margin-top:0.7em;padding-top:0.7em;border-top:1px solid;list-style-type:none;}.hitWrapper ul li:first-child{border-top:0px;margin-top:0px;color:black!important;padding:0px;}.showResults{display:block;}.hideResults{display:none;}.hitWrapper span{color:black;font-size:14px;}.headerTitle{height:auto;font-size:16px;line-height:1.5;font-weight:300;color:#fff!important;margin-top:16px;text-transform:uppercase;}.headerTitle a{color:#fff;}.headerTitle a:hover{-webkit-text-decoration:none;text-decoration:none;opacity:0.8;}.logoWrapper{padding:21px 0;padding-left:20px;}.logoContent{font-family:'Roboto';margin-left:16px;font-size:28px;line-height:1.5;font-weight:500;padding-right:10px;}.removePadd{padding:0!important;}.navBarDefault{background-color:#001934;border-radius:0;border-top:0;margin-bottom:0;border:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;box-shadow:-1px 0px 4px 1px rgba(175, 158, 232, 0.4);-webkit-box-shadow:-1px 0px 4px 1px rgba(175, 158, 232, 0.4);-moz-box-shadow:-1px 0px 4px 1px rgba(175, 158, 232, 0.8);-o-box-shadow:-1px 0px 4px 1px rgba(175, 158, 232, 0.4);z-index:1;padding:15px;position:relative;height:80px;}.navBarHeader{min-width:335px;padding-right:20px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}.navBarBrand{padding:0px 0px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}.navBarBrand img{width:49px;margin-right:6px;display:inline-block;}.navBarUL li{list-style-type:none;}.navBarUL{-webkit-overflow-scrolling:touch;}.navBarUL li a{font-family:'Roboto';color:#fff!important;font-size:16px;font-weight:500;line-height:1em;opacity:1;padding:10px 15px;}.navBarNav{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}.navBarUL li a img,.navBarUL li a .shareIcon{width:20px;}.navBarUL li a:hover{opacity:0.7;}pre{border:0!important;background-color:rgb(245, 247, 249);}blockquote{color:rgb(116, 129, 141);margin:0px 0px 24px;padding:0px 0px 0px 12px;border-left:4px solid rgb(230, 236, 241);border-color:rgb(230, 236, 241);}.socialWrapper{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}.socialWrapper li{display:inline-block;}.socialWrapper li a{display:contents;}.discordBtn,.twitterBtn{border-radius:4px;border:solid 1px #d1d2d3;background-color:#f1f5f8;width:20px;height:20px;padding-top:2px;margin-left:8px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;opacity:.8;cursor:pointer;}.twitterBtn img{width:12px!important;}.discordBtn img{width:10px!important;}.discordBtn:hover,.twitterBtn:hover{opacity:1;}.discordBtn img{width:10px;}.sidebarTitle{background-color:#f8f8f8;padding:18px 16px;font-family:'Poppins';font-size:18px;font-weight:600;color:#001934;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}.sideBarShow{display:none;}.sidebarTitle a{color:#001934;}.greenCircle{width:8px;height:8px;background-color:#1cd3c6;border-radius:50%;margin:0 12px;}.headerNav{font-family:'Roboto';padding:0px 24px;color:#001933;font-size:16px;font-weight:500;line-height:1em;}.headerNav a{color:#001933;-webkit-text-decoration:none;text-decoration:none;}.headerNav a:hover{-webkit-text-decoration:none;text-decoration:none;}.logoWrapper img{width:40px;}.sideBarUL{margin-top:32px;}.sideBarUL li{list-style-type:none;width:auto;}.sideBarUL li a{font-size:14px;font-weight:500;line-height:1.5;padding:7px 24px 7px 16px;padding-left:10px;padding-right:25px;border-style:solid none solid solid;border-width:1px 0px 1px 1px;border-color:transparent currentcolor transparent transparent;}.hideFrontLine .collapser{background:transparent;border:none;outline:none;position:absolute;right:20px;z-index:1;cursor:pointer;}.hideFrontLine .active>a{background-color:#1ed3c6;color:#fff!important;}.firstLevel ul li .collapser svg path{fill:#fff!important;}.active .collapser>svg>path{fill:#001933!important;}.firstLevel ul .item ul .item{border-left:1px solid #e6ecf1;}.sideBarUL .item{list-style:none;padding:0;}.sideBarUL .item>a{color:#1ED3C6;-webkit-text-decoration:none;text-decoration:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;position:relative;width:100%;padding-right:35px;padding-left:15px;}.showFrontLine .item>a:hover{background-color:#001933;}.showFrontLine .active>a{background-color:#001933;}.sideBarUL .item .item{margin-left:16px;}.firstLevel>ul>.item{margin-left:0!important;}.showFrontLine .item .item{border-left:1px solid #e6ecf1;border-left-color:rgb(230, 236, 241);padding:0;width:calc(100% - 16px)!important;}.showFrontLine .item .active>a{border-color:rgb(230, 236, 241)!important;border-style:solid none solid solid;border-width:1px 0px 1px 1px;background-color:#1ed3c6!important;color:#fff;}.titleWrapper{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding-bottom:40px;border-bottom:1px solid rgb(230, 236, 241);margin-bottom:32px;}.gitBtn{height:30px;min-height:30px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}.gitBtn img{width:15px;display:inline-block;margin-right:5px;}.addPaddTopBottom{padding:50px 0;}.preRightWrapper{display:block;margin:0px;-webkit-flex:1 1 0%;-ms-flex:1 1 0%;flex:1 1 0%;padding:16px;text-align:right;}.smallContent{display:block;margin:0px;padding:0px;color:#6e6e6e;}.smallContent span{font-size:12px;line-height:1.625;font-weight:400;}.nextRightWrapper{display:block;margin:0px;padding:16px;-webkit-flex:1 1 0%;-ms-flex:1 1 0%;flex:1 1 0%;}table{padding:0;}table tr{border-top:1px solid #cccccc;margin:0;padding:0;}table tr:nth-child(2n){background-color:#f8f8f8;}table tr th{font-weight:bold;border:1px solid #cccccc;text-align:left;margin:0;padding:6px 13px;}table tr td{border:1px solid #cccccc;text-align:left;margin:0;padding:6px 13px;}table tr th :first-child,table tr td :first-child{margin-top:0;}table tr th :last-child,table tr td :last-child{margin-bottom:0;}img{max-width:100%;}.githubBtn{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;font-size:16px;padding:10px 0px;padding-left:15px;max-height:40px;}.githubBtn span span{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}.communitySection{font-size:24px;font-weight:700;}.authorSection{padding:20px 0;}.authorSection,.authorName{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}.authorImg img{width:75px;height:75px;border-radius:50%;min-width:75px;max-width:75px;min-height:75px;max-height:75px;}.authorDetails{padding-left:10px;}.authorDesc{padding-top:5px;font-size:14px;}.authorName img{margin-left:10px;display:inline-block;width:20px;}.authorName img:hover{opacity:0.7;}.heading1{font-size:26px;font-weight:800;line-height:1.5;margin-bottom:16px;margin-top:32px;}.heading2{font-size:24px;font-weight:700;line-height:1.5;margin-bottom:16px;margin-top:32px;}.heading3{font-size:20px;font-weight:600;line-height:1.5;margin-bottom:16px;margin-top:32px;}.heading4{font-size:18px;font-weight:500;line-height:1.5;margin-bottom:16px;margin-top:32px;}.heading5{font-size:16px;font-weight:400;line-height:1.5;margin-bottom:16px;margin-top:32px;}.heading6{font-size:14px;font-weight:300;line-height:1.5;margin-bottom:16px;margin-top:32px;}.paragraph{margin:16px 0px 32px;line-height:1.625;}.pre{font-size:14px;margin:0px;padding:16px;overflow:auto;}.poweredBy{font-size:0.6em;text-align:end;padding:0;}.topnav{-webkit-transition:top 0.5s,bottom 0.5s;}@media (max-width: 767px){.formElement svg path{fill:#001934;}.visibleMobileView{display:block!important;}.searchInput{color:#001934;}.socialWrapper{position:absolute;right:10px;top:29px;}.responsive{margin-top:15px;position:relative;padding-bottom:20px;border-top:1px solid #fff;}.headerTitle{padding-right:50px;font-size:16px;}.navBarBrand{min-height:40px;}.navBarBrand img{margin-right:8px;}.topnav.responsive .visibleMobile{display:block;}.topnav .navBarUL{display:none;}.topnav.responsive .navBarUL{display:block;text-align:left;}.hiddenMobile{display:none!important;}hr{margin-top:0;margin-bottom:0;}.navBarParent{display:block;}.separator{margin-top:20px;margin-bottom:20px;}.navBarULRight{position:static;}.navBarUL{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin:7.5px 0px;}.navBarUL li{height:37px;}.navBarUL li a{font-size:14px;padding:10px 15px;}.navBarDefault{display:block;height:auto;}.navBarToggle{margin-right:0;display:block;position:absolute;left:11px;top:15px;background:#fff;}.navBarHeader{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;min-width:auto;padding-right:0;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}.navBarBrand{font-size:20px;padding:0 0;padding-left:0;-webkit-flex:initial;-ms-flex:initial;flex:initial;padding-right:15px;}.titleWrapper{padding:0 15px;display:block;}.gitBtn{display:inline-block;}.mobileView{text-align:left!important;padding-left:0!important;}.searchWrapper{padding:0px 0;padding-top:0px;position:absolute;bottom:0px;width:calc(100% - 70px);position:absolute;left:40px;top:8px;}.hitWrapper{width:100%;right:0;top:35px;max-height:-webkit-fit-content;max-height:-moz-fit-content;max-height:fit-content;position:static;}}@media (min-width: 768px) and (max-width: 991px){.navBarDefault{padding:10px;}.navBarBrand{font-size:22px;}.navBarHeader{min-width:240px;-webkit-flex:initial;-ms-flex:initial;flex:initial;}.githubBtn{padding:10px 10px;}.divider{margin:0 5px;height:20px;}.hitWrapper{max-width:500px;}.navBarUL li a{padding:10px 5px;}.searchWrapper{padding-left:0px;}}</style><div class="navBarWrapper"><nav class="navBarDefault"><div class="navBarHeader"><a href="https://taroguru.github.io" class="navBarBrand"><img class="img-responsive displayInline" src="/logo.jpg" alt="logo"/></a><div class="headerTitle displayInline"><a href='https://taroguru.github.io/'>모든 코드는 능히 버그를 가지고 있을지니...</a></div></div><ul class="socialWrapper visibleMobileView"><li>
		    <a href="https://twitter.com/taroguru" target="_blank" rel="noopener">
		      <div class="twitterBtn">
		        <img src='https://graphql-engine-cdn.hasura.io/learn-hasura/assets/homepage/twitter-brands-block.svg' alt={'Twitter'}/>
		      </div>
		    </a>
		  </li>
			</ul><div id="navbar" class="topnav"><div class="visibleMobile"><style data-emotion="css z7d7m6">.css-z7d7m6{width:100%;height:100vh;overflow:auto;position:fixed;padding-left:0px;position:-webkit-sticky;position:-moz-sticky;position:-webkit-sticky;position:sticky;top:0;padding-right:0;-webkit-box-shadow:-1px 0px 4px 1px rgba(175, 158, 232, 0.4);}@media only screen and (max-width: 1023px){.css-z7d7m6{width:100%;height:100vh;}}@media (min-width: 767px) and (max-width: 1023px){.css-z7d7m6{padding-left:0;}}@media only screen and (max-width: 767px){.css-z7d7m6{padding-left:0px;height:auto;}}</style><aside class="css-z7d7m6 e1sbq3r11"><div class="sidebarTitle hiddenMobile"><a href='https://play.google.com/store/apps/details?id=workshop.soso.jickjicke'>Rala</a><div class='greenCircle'></div><a href='https://github.com/taroguru/rala'>repo</a></div><ul class="sideBarUL"><li class="hideFrontLine firstLevel item "><ul><li class=" item "><ul><li class=" item "><a href="/conference/20231017-mscloudroadshow">공공 디지털 혁신을 위한 클라우드 로드쇼 </a></li></ul></li><li class=" item "><a href="/japs">잡다한 글<button aria-label="collapse" class="collapser"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24"><path d="M0 7.33l2.829-2.83 9.175 9.339 9.167-9.339 2.829 2.83-11.996 12.17z"></path></svg></button></a><ul><li class=" item "><a href="/japs/20200504-introduction">켜져있어서 돌아가는 서비스 운영하기</a></li><li class=" item "><a href="/japs/20200519-category">글 정리</a></li><li class=" item "><a href="/japs/20220516-asynchronous-programming">20220516 Asynchronous Programming</a></li><li class=" item "><a href="/japs/20220516-cache">20220516 Cache</a></li><li class=" item "><a href="/japs/20220517-reinforcementlearning">20220517 Reinforcementlearning</a></li><li class=" item "><a href="/japs/20220922-cloud">20220922 Cloud</a></li><li class=" item "><a href="/japs/20221123-cloud-architecture-interview">20221123 Cloud Architecture Interview</a></li><li class=" item "><a href="/japs/20221213-japjap">잡에러</a></li><li class=" item "><a href="/japs/20221213-toonycolorspro2">[Unity] Toony Colors Pro 2 적용</a></li><li class=" item "><a href="/japs/20221215-awsdrtrainingday">[AWS] DR TrainingDay</a></li><li class=" item "><a href="/japs/20230602-asus-g14-init">[일기] ASUS 노트북 구매 일기 겸 세팅</a></li><li class=" item "><a href="/japs/20230812-g14-2month">[리뷰] G14 4080(2023) 2개월 사용 리뷰</a></li></ul></li><li class=" item "><a href="/sideproject">장난감<button aria-label="collapse" class="collapser"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24"><path d="M0 7.33l2.829-2.83 9.175 9.339 9.167-9.339 2.829 2.83-11.996 12.17z"></path></svg></button></a><ul><li class=" item "><a href="/sideproject/20200722-linux-file-aspnetcore-oss">맥에서 ASP.Net Core 빌드하기</a></li><li class=" item "><a href="/sideproject/20210814-cargo-base">컨트리뷰션아카데미의그림자 - Cargo 기초</a></li><li class=" item "><a href="/sideproject/20210814-rust-base">컨트리뷰션아카데미의그림자 - Rust 기초</a></li><li class=" item "><a href="/sideproject/20221026-rala">20221026 Rala</a></li><li class=" item "><a href="/sideproject/20230805-game-01">unity pixel art</a></li><li class=" item "><a href="/sideproject/20230811-tilemapgenerator">타일맵 생성</a></li></ul></li><li class=" item "><a href="/20221116_googleworkspace">20221116 Googleworkspace</a></li><li class=" item "><a href="/automation">프로비저닝과 자동화<button aria-label="collapse" class="collapser"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24"><path d="M0 7.33l2.829-2.83 9.175 9.339 9.167-9.339 2.829 2.83-11.996 12.17z"></path></svg></button></a><ul><li class=" item "><a href="/automation/20200513-ansible">Ansible로 로컬 스크립트를 원격 서버에서 실행</a></li><li class=" item "><a href="/automation/20200522-vcenter">vCenter Server for Windows to vCenter Server Appliance</a></li><li class=" item "><a href="/automation/20200525-tomcat-update">Tomcat 업데이트(9.0.16-&gt;9.0.37)</a></li><li class=" item "><a href="/automation/20200602-ansible-windows-server">Ansible로 윈도우 서버 관리</a></li><li class=" item "><a href="/automation/20210114-apache-security">아파치 보안 설정</a></li><li class=" item "><a href="/automation/20211110-install_awx">AWX(Ansbie) 설치</a></li></ul></li><li class=" item "><a href="/cicd">CI/CD<button aria-label="collapse" class="collapser"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24"><path d="M0 7.33l2.829-2.83 9.175 9.339 9.167-9.339 2.829 2.83-11.996 12.17z"></path></svg></button></a><ul><li class=" item "><a href="/cicd/20200527-msbuild">MSBuild와 NuGet</a></li></ul></li><li class=" item "><a href="/coding">개발<button aria-label="collapse" class="collapser"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24"><path d="M0 7.33l2.829-2.83 9.175 9.339 9.167-9.339 2.829 2.83-11.996 12.17z"></path></svg></button></a><ul><li class=" item "><a href="/coding/20211005-android-mediaplayer-speed">[Android] MediaPlayer </a></li><li class=" item "><a href="/coding/20211207-dotnet-session-repository">Tomcat+SQL Server에서 돌아가는 CMS 튜닝</a></li><li class=" item "><a href="/coding/20211213-javascript">JavaScript</a></li><li class=" item "><a href="/coding/20220204-typescript">TypeScript Cheetsheet</a></li><li class=" item "><a href="/coding/20220419-svelte-cheatsheet">Svelte 훓어보기</a></li><li class=" item "><a href="/coding/20220421-promise">promise</a></li><li class=" item "><a href="/coding/20220506-codility-binrarygap">Codility BinaryGap</a></li><li class=" item "><a href="/coding/20220506-kotlin">Kotlin 훓어보기</a></li><li class=" item "><a href="/coding/20220507-rotatearray">20220507 Rotatearray</a></li><li class=" item "><a href="/coding/20220508-OddOccurrencesInArray">20220508 Odd Occurrences In Array</a></li><li class=" item "><a href="/coding/20220509-fontmetrics">20220509 Fontmetrics</a></li><li class=" item "><a href="/coding/20220532-googledrive">Svelte 훓어보기</a></li><li class=" item "><a href="/coding/20220615-bstartuptalk">20220615 Bstartuptalk</a></li><li class=" item "><a href="/coding/20220701-csharp-lambda">C# Lambda</a></li><li class=" item "><a href="/coding/20220701-kickstart">Google Kickstart</a></li><li class=" item "><a href="/coding/20220819-gamedev-japnote">만들자 게임</a></li><li class=" item "><a href="/coding/20230104-unity-ecs">Unity ECS(from 2022.2 테크 스트림)</a></li><li class=" item "><a href="/coding/20240202-getandsetwindow">[WinAPI] C#에서 GetWindowLong(), SetWindowLong() 호출</a></li><li class=" item "><a href="/coding/20240220-encode_string">[Java] Android에서 mqtt 수신시 문자열 깨짐</a></li><li class=" item "><a href="/coding/20240509-python">python 좀 헷갈리는 부분들</a></li><li class=" item "><a href="/coding/20240615-android-sdk-version">올려보자, Android SDK Version</a></li></ul></li><li class=" item "><a href="/configuration">설정<button aria-label="collapse" class="collapser"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24"><path d="M0 7.33l2.829-2.83 9.175 9.339 9.167-9.339 2.829 2.83-11.996 12.17z"></path></svg></button></a><ul><li class=" item "><a href="/configuration/20200521-vnc">CentOS 7 원격 데스크탑 사용을 위한 VNC Server 설치</a></li><li class=" item "><a href="/configuration/20200921-DNS-MAIL">전자 메일 인증 - SPF, DKIM, DMARC</a></li><li class=" item "><a href="/configuration/20210120-clone-linux">리눅스 복제 준비</a></li><li class=" item "><a href="/configuration/20210218-kubernetes-on-premise">Kubernetes 정리</a></li><li class=" item "><a href="/configuration/20210310-wordpress-server-memory-issue">워드프레스(httpd+php+mysql) 서버 지속적인 메모리 감소 이슈</a></li><li class=" item "><a href="/configuration/20210917-govc">govc로 vCenter 로그인</a></li><li class=" item "><a href="/configuration/20211207-extenddisk">VMware 가상머신 CentOS 6.x 디스크 관리</a></li><li class=" item "><a href="/configuration/20211216-bigip-remove-http-header">Big-IP에서 특정 HTTP 응답 헤더 삭제하기</a></li><li class=" item "><a href="/configuration/20220530-firewall-cmd">firewalld Cheatsheet</a></li><li class=" item "><a href="/configuration/20221013-limit-http-method-httpd">Apache httpd에서 특정 method 제한</a></li><li class=" item "><a href="/configuration/20221013-lotatelog">logrotate로 로그 파일 돌리기</a></li></ul></li><li class=" item "><a href="/daily">일기<button aria-label="collapse" class="collapser"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24"><path d="M0 7.33l2.829-2.83 9.175 9.339 9.167-9.339 2.829 2.83-11.996 12.17z"></path></svg></button></a><ul><li class=" item "><a href="/daily/20220511">다이어리</a></li><li class=" item "><a href="/daily/20220815-awsinterview">인터뷰 후기</a></li><li class=" item "><a href="/daily/20221103-greenbonus">무배당 그린보너스저축보험</a></li><li class=" item "><a href="/daily/20230103-diary">20230103 Diary</a></li><li class=" item "><a href="/daily/20230801">2023-08-01, 일기</a></li><li class=" item "><a href="/daily/20231002-notebook-audio-chipset">노트북 오디오 칩셋 찾기</a></li></ul></li><li class=" item "><a href="/infra">인뿌라스트락쨔<button aria-label="collapse" class="collapser"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24"><path d="M0 7.33l2.829-2.83 9.175 9.339 9.167-9.339 2.829 2.83-11.996 12.17z"></path></svg></button></a><ul><li class=" item "><a href="/infra/20220722-monitoring-using-snmp">Zabbix와 SNMP를  이용하여 Cisco 장비 모니터링</a></li><li class=" item "><a href="/infra/20220801-vcenter-webclient-503">20220801 Vcenter Webclient 503</a></li><li class=" item "><a href="/infra/20220914-dotnet-windows-logging">20220914 Dotnet Windows Logging</a></li><li class=" item "><a href="/infra/20220926-nginx">20220926 Nginx</a></li><li class=" item "><a href="/infra/20221025-ssh">20221025 Ssh</a></li><li class=" item "><a href="/infra/20221104-docker-no-space">Docker) No space left on device </a></li><li class=" item "><a href="/infra/20221111-smbmountonlinux">SMB 마운트. 윈도우 공유 폴더를 리눅스에서 마운트</a></li><li class=" item "><a href="/infra/20221122-centos7-boot-cli">CentOS 7. run level 설정. 부팅시 GUI 데스크탑/CLI 설정. </a></li><li class=" item "><a href="/infra/20221129-zabbix-migration">CentOS 7. run level 설정. 부팅시 GUI 데스크탑/CLI 설정. </a></li><li class=" item "><a href="/infra/20221130-zabbix-password-update">Zabbix 비밀번호 업데이트(5.0 or higher)</a></li><li class=" item "><a href="/infra/20221201-zabbix-telegram-webhook-not-work">Zabbix 6.2 Telegram Webhook 동작하지 않음</a></li><li class=" item "><a href="/infra/20221201-zabbix-unreachablepoller-75-busy">Zabbix - unreachable poller processes more than 75% busy</a></li><li class=" item "><a href="/infra/20221207-freq-linux-cmd">자주쓰는 리눅스 명령어</a></li><li class=" item "><a href="/infra/20230323-rancher-install">[Kubernetes] Rancher를 이용한 클러스터 구성</a></li><li class=" item "><a href="/infra/20230329-nutanix">Nutanix Basic Bootcamp</a></li><li class=" item "><a href="/infra/20230331-authentication-with-ad-on-rancher">[Kubernetes] Rancher와 Active Directory 인증</a></li><li class=" item "><a href="/infra/20230331-deployment-workload-on-rancher">[Kubernetes] Rancher에 웹서비스 배포</a></li><li class=" item "><a href="/infra/20230407-bind-zabbix-monitor">[Zabbix] Zabbix에서 named 모니터링하기</a></li><li class=" item "><a href="/infra/Untitled-1">Untitled 1</a></li><li class=" item "><a href="/infra/aws">AWS 기타</a></li><li class=" item "><a href="/infra/bigip-tcpconnection">F5 BIG-IP TCP 연결 흐름</a></li><li class=" item "><a href="/infra/connect-gitlab-kubernetes">GitLab에서 Kubernetes 관리</a></li><li class=" item "><a href="/infra/dhcp-cleanup-expired-clients">[Windows Server] DHCP 서버에서 기간 만료된 클라이언트 IP가 남아있을 떄?</a></li><li class=" item "><a href="/infra/docker_cheatsheet">Docker cheatsheet</a></li><li class=" item "><a href="/infra/git_cheatsheet">Git cheatsheet</a></li><li class=" item "><a href="/infra/jenkins_cheatsheet">Jenkins Cheatsheet</a></li><li class=" item "><a href="/infra/kubernetes_auth">Active Directory를 이용한 Kubenetes 인증</a></li><li class=" item "><a href="/infra/kubernetes_cheatsheet">Kubernetes cheatsheet</a></li><li class=" item "><a href="/infra/linux_cheatsheet">Linux cheatsheet</a></li><li class=" item "><a href="/infra/mysql-characterset">MySQL Characterset utf8, utfmb3, utfmb4</a></li><li class=" item "><a href="/infra/prometheus_cheatsheet">Prometheus - Kubernetes Monitoring Cheatsheet</a></li><li class=" item "><a href="/infra/tomcat-jmx-with-zabbix">Zabbix로 Tomcat(JMX)모니터링</a></li><li class=" item "><a href="/infra/tomcat-jmx-with-zabbix copy">Tomcat 모니터링 주요 지표와 Zabbix Item</a></li><li class=" item "><a href="/infra/vagrant_cheatsheet">Vagrant cheatsheet</a></li><li class=" item "><a href="/infra/vagrant_cheetsheet">Vagrant cheetsheet</a></li><li class=" item "><a href="/infra/zabbix-upgrade">Zabbix 4.0 to 6.0</a></li></ul></li><li class=" item "><a href="/ml">머신러닝<button aria-label="collapse" class="collapser"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24"><path d="M0 7.33l2.829-2.83 9.175 9.339 9.167-9.339 2.829 2.83-11.996 12.17z"></path></svg></button></a><ul><li class=" item "><a href="/ml/20211224-aws-ml">[AWS] The machine learning pipeline on aws</a></li></ul></li><li class=" item "><a href="/monitoring">모니터링과 로깅<button aria-label="collapse" class="collapser"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24"><path d="M0 7.33l2.829-2.83 9.175 9.339 9.167-9.339 2.829 2.83-11.996 12.17z"></path></svg></button></a><ul><li class=" item "><a href="/monitoring/20201212-zabbix-api">Zabbix API를 이용한 히스토리 정보를 CSV로 뽑기</a></li></ul></li><li class=" item "><a href="/study">학습<button aria-label="collapse" class="collapser"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24"><path d="M0 7.33l2.829-2.83 9.175 9.339 9.167-9.339 2.829 2.83-11.996 12.17z"></path></svg></button></a><ul><li class=" item "><a href="/study/20200510-mapreduce">MapReduce 학습</a></li><li class=" item "><a href="/study/20200818-azure">Azure Fundamentals</a></li><li class=" item "><a href="/study/20200901-kubernetes">Kubenetes with VMware(On-Premise)</a></li><li class=" item "><a href="/study/20210427-managing-kubernetes">매니징 쿠버네티스</a></li><li class=" item "><a href="/study/20211126-tcpdump-log">tcpdump 로그 읽기</a></li><li class=" item "><a href="/study/20211217-rfc3330">[RFC3330] Special-Use IPv4 Addresses</a></li><li class=" item "><a href="/study/20220308-css">CSS 학습</a></li><li class=" item "><a aria-current="page" class="" href="/study/202230408-ckad2">[CKAD] Kubernetes Certificate Application Developer(CKAD) with Tests 학습노트(2/)</a></li><li class=" item "><a href="/study/2023-0402-CKAD-test">[CKAD] Kubernetes Certificate Application Developer(CKAD) with Tests 학습노트(1/)</a></li><li class=" item "><a href="/study/20230401-cka">[CKA] Certified Kubernetes Administrator (CKA) with Practice Tests Notes</a></li><li class=" item "><a href="/study/20230420-pass">[교육] PAAS</a></li><li class=" item "><a href="/study/20230421-paas-2nd">[교육] PAAS 2일차</a></li><li class=" item "><a href="/study/20230421-paas-3rd">[CKAD] Kubernetes Certificate Application Developer(CKAD) with Tests 학습노트(3/)</a></li><li class=" item "><a href="/study/20230507-ckad_3">[CKAD] Kubernetes Certificate Application Developer(CKAD) with Tests 학습노트(3/)</a></li><li class=" item "><a href="/study/20230521-ckad-정리">[CKAD] Kubernetes Certificate Application Developer(CKAD) with Tests 문제 정리</a></li><li class=" item "><a href="/study/20230521-vim">자주쓰는 vim 커맨드</a></li><li class=" item "><a href="/study/20230530-cka-01">[CKA] Kubernetes Certificate Administrator(CKA) with Tests 학습노트(1/)</a></li><li class=" item "><a href="/study/20230530-heredoc">20230530 Heredoc</a></li><li class=" item "><a href="/study/20230608-cka-2">[CKA] Kubernetes Certificate Administrator(CKA) with Tests 학습노트(2/)</a></li><li class=" item "><a href="/study/20230609-cka-test">[CKA] Kubernetes Certificate Administrator(CKA) with Tests 문제 정리</a></li><li class=" item "><a href="/study/20230611-kubernetesnetwork">쿠버네티스 네트워크</a></li><li class=" item "><a href="/study/20230720-security-certification">보안기사</a></li><li class=" item "><a href="/study/20230813-kubernetes_on_virtualbox_using_vagrant">vagrant와 virtualbox을 이용하여 윈도우에 개발용 쿠버네티스 클러스터 구축</a></li><li class=" item "><a href="/study/20230813-kubernetes_on_wsl_using_vagrant">vagrant와 virtualbox을 이용하여 윈도우에 개발용 쿠버네티스 클러스터 구축</a></li><li class=" item "><a href="/study/20230911-cks-01">CKS 준비 - </a></li><li class=" item "><a href="/study/20231013-cks-test">[CKS] Kubernetes CKS 2023 Complete Course - Theory - Practice</a></li><li class=" item "><a href="/study/20231023-kubectl-windows-install">[Rancher] kubectl 윈도우 설치</a></li><li class=" item "><a href="/study/20231023-rancher-update-tls">[Rancher] Rancher SSL/TLS 인증서 업데이트</a></li><li class=" item "><a href="/study/20231117-vmware-compatibility">VMWare EVC 모드 활성화와 vMotion</a></li><li class=" item "><a href="/study/20240207-uart">[네트워크?] UART - Universal asynchronous receiver/transmitter</a></li></ul></li><li class=" item "><a href="/worklog">작업일지<button aria-label="collapse" class="collapser"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24"><path d="M0 7.33l2.829-2.83 9.175 9.339 9.167-9.339 2.829 2.83-11.996 12.17z"></path></svg></button></a><ul><li class=" item "><a href="/worklog/20200505-buildblog">Gatsby로 블로그 만들어 Github Pages에 배포하기</a></li><li class=" item "><a href="/worklog/20200515-nginx_dotnetcore">Linux에서 Nginx + ASP.NET Core로 웹서비스 돌리기</a></li><li class=" item "><a href="/worklog/20200702-linux-file-recover">리눅스 파일 복구</a></li><li class=" item "><a href="/worklog/20210518-downgrade-hwversion-vmware-vm">VMware 가상머신 하드웨어 버전 다운그레이드</a></li><li class=" item "><a href="/worklog/20210815-github-personalaccesstoken">GitHub - Personal Access Token</a></li><li class=" item "><a href="/worklog/20210815-node-version">Netlify 빌드 에러 - The engine node is incompatible with this module. Expected version &gt;=12.</a></li><li class=" item "><a href="/worklog/20210829-pythonversion-mac">맥에서 기본 파이선 버전 설정</a></li><li class=" item "><a href="/worklog/20210908-change-blog-with-gatsby">Gatsby Starter 수정. 플러그인 중심으로.</a></li><li class=" item "><a href="/worklog/20210928-powershell">[PowerShell] 사용자에게 폴더 권한(읽기/쓰기 등) 부여</a></li><li class=" item "><a href="/worklog/20211027-loadtest">Tomcat+SQL Server에서 돌아가는 CMS 튜닝</a></li><li class=" item "><a href="/worklog/20220314-oracle-lock">Oracle이가 응답하지 않는다. wait, latch, lock and ...</a></li><li class=" item "><a href="/worklog/20220415-cron-notroot">cron으로 Tomcat 재시작</a></li></ul></li><li class=" item "><a href="/yakun">야-근<button aria-label="collapse" class="collapser"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24"><path d="M0 7.33l2.829-2.83 9.175 9.339 9.167-9.339 2.829 2.83-11.996 12.17z"></path></svg></button></a><ul><li class=" item "><a href="/yakun/20211201-keyboard">키보드</a></li></ul></li></ul></li><style data-emotion="css 1q387v1">.css-1q387v1{list-style:none;padding:0.5rem 0;}.css-1q387v1 hr{margin:0;padding:0;border:0;border-bottom:1px solid #ede7f3;}</style><li class="css-1q387v1 e1sbq3r10"><hr/></li><style data-emotion="css k0rhaf">.css-k0rhaf{list-style:none;}.css-k0rhaf a{color:#5c6975;-webkit-text-decoration:none;text-decoration:none;font-weight:400;padding:0.45rem 0 0.45rem 2rem;display:block;position:relative;}.css-k0rhaf a:hover{color:#1ed3c6!important;}.css-k0rhaf a svg{float:right;margin-right:1rem;}</style><li class="css-k0rhaf e1sbq3r12"><a href="https://github.com/taroguru" to="https://github.com/taroguru" target="_blank" rel="noopener noreferrer">GitHub<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg></a></li></ul></aside><hr/></div><ul class="navBarUL navBarNav navBarULRight"><li class="divider hiddenMobile"></li><li class="hiddenMobile"><ul class="socialWrapper"><li>
		    <a href="https://twitter.com/taroguru" target="_blank" rel="noopener">
		      <div class="twitterBtn">
		        <img src='https://graphql-engine-cdn.hasura.io/learn-hasura/assets/homepage/twitter-brands-block.svg' alt={'Twitter'}/>
		      </div>
		    </a>
		  </li>
			</ul></li><li class="githubBtn"><span><a href="https://github.com/taroguru" data-show-count="true" aria-label="Star on GitHub">Star</a></span></li><li><style data-emotion="css 10hr3p7">.css-10hr3p7{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:end;-ms-flex-pack:end;-webkit-justify-content:flex-end;justify-content:flex-end;width:100%;padding:0 20px 0 25px;}.css-10hr3p7 .switch{position:relative;display:inline-block;width:50px;height:20px;}.css-10hr3p7 .switch input{opacity:0;width:0;height:0;}.css-10hr3p7 .slider{position:absolute;cursor:pointer;top:0;left:0;right:0;bottom:0;background-color:#ccc;-webkit-transition:0.4s;-webkit-transition:0.4s;transition:0.4s;}.css-10hr3p7 .slider:before{position:absolute;content:'';height:30px;width:30px;left:0px;bottom:4px;top:0;bottom:0;margin:auto 0;-webkit-transition:0.4s;-webkit-transition:0.4s;transition:0.4s;box-shadow:0 0px 15px #2020203d;background:white url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAsQAAALEBxi1JjQAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAOfSURBVEiJlZVLaFxVGMd/333NJG2a+ujUJnGSSWljGvPoQ0tBbIooulDoQgSpEou4UOqiLlzpxoVFEIsgaotaaEhBEXVV8EUXgrao0SYxk6ROjCUxfaQvm8fMPfd+LqZJ5k4ySfxW93yP/+Ocw7mwTOhw21odbG8rzuf6N3fl+iqNDm5rXGreKlXwB1oe8vtr0yanF4JY1YeR2lDzbgnHn5JwxvYJjuhwR7wUjixUXBc3Wfsk/lg7sUYkvmXC1vB+qe3K5IZa90s2cxTNWQASa4B4C0AAfO8kOx8pxnMi4OdaEmbmcg9mIoF7NxLfAiIvSLIrAyChjswpsysg3jy7tEEuLeZgbotUsQL/SjdmIoF4SPl2QM7YNce/mO1xG85+p27dy3lp1XMbIPCrfbGsY0kCM7DxWzWXqgCINQIugh4TQSMuYRRAxSnM/Ss7jvglCfy+1gfwx/bMuhWv/lbR/rp4wLZw88qzPYIcBDIscpazkZdhXf2YMLy1DwnIq1Muxv5eMLCp5zPta6qQTb03oRdVDkO7XYpAdLhtrZkcuoKavIp4MxK7ByDrJDtLXr+VhmWy/oE5cECkfPYzpiNP37ZSIE23pLSvyVtAIGR3RTLizn0ay25ZEXjm3vVGL/wWxCrfU22PXH1LMVXR7lzhYu+y4H+1bjWTf45jV6/Bq38+OF/zTYTAEnUjAzozb0bp0H+eW7cUgdT93o274QxeDQChhK9GCELcy5GJILKsDHxzaFkX4qUJp99F5agrzrWIgFy68SPxM/vnMw6y5glg/uYJctBOHn9nOaLCyJ1/ZqeE4WrLldgHUTkGzY1EU+jb/si+t4oPsFSYkX3PWqqnLJGdAmD+SNzU4PqquQ6rDKl4LOIi70T7FN6wA/crSR2bKaypPmmbUfdBCezXEN0DqC1hgwAEg42Hwmwmcjji1UPZ9lIipxB+Ah1FLR90A3AfcGdBz5dOsnOv5Nmxgv7ENQ2uV0RgynYgXmolu1Ic03YQbJPUiXT+xyGEtnPXw1heGG37Bc2e+9/oAq9I6kQaCp5r2Xz2tHqpA4hb8DwrzHSjUz9COL0icEXftJOd7xeQRcMMNT1ObuxzDafcaMVGvFrw6sC6HWTB6DTwkpPs/KTIzSIqhrauM8GNTzHjuwsfwvkpB6w1IHEQVGV1r+vc8aJsPPXDgtaSXgEd2FXtc/V1gslHLabWa5jzEAXsACm/IVbZz8iqw05Dz8lSGP8BjRZeDZkbZsEAAAAASUVORK5CYII=);background-repeat:no-repeat;-webkit-background-position:center;background-position:center;}.css-10hr3p7 input:checked+.slider{background:linear-gradient(to right, #fefb72, #f0bb31);}.css-10hr3p7 input:checked+.slider:before{-webkit-transform:translateX(24px);-ms-transform:translateX(24px);-webkit-transform:translateX(24px);-moz-transform:translateX(24px);-ms-transform:translateX(24px);transform:translateX(24px);background:white url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAApgAAAKYB3X3/OAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAANGSURBVEiJndVPbNRVEAfwz9vd/q8tBQtoxSYYDKYmejMGD3DxYloMiRoT22IEDQcPno3xoFclMf6JHrDFyIVEI3g2eiDoRWOMfygqNrSkoeAWCtIu230e3m+77e6KCZO8vH3zZuY7M+/7mxVjVFu7C+vPt7mmh4fi+eEDMUYFVZkdeZU7dhgIzxOj25ULe3fJx6PYamZkDYD4rRDmmgafDIdE3aIJbcrKxkQF4/GtBtuY/43KGVBxOsT/S3YijAomEVBCBe0geNlYfLfBZ3bfJmFlp7u/ONUcYCIMCw6jL1vhFikUURS9Zn88Vn9ZaOJA8DTuA3n0Zjm3ZlDL2VrASpZE8CwaABormAgPC75Cny7cmYE0kwou4Rq4IWeP0fhdc4DjIe+GD0QvIKcbmzOrtl56t9O2gRBYvsKVcyz9ne7nsQgiPhUdtD8uNVYwGRbQK497qu3ZzsYHUuB1EimepTiVKplBGZQM6rI7liFX5/Ur0rPmpYw3ZcEL7fRso3eQQgcCfffT0Z+i9K3GOFMNvh7gWOjDYGpJpuvbkQK1dND/IF1b6Oynf4jW7jU2a3zY6uPQ3whw0/u4S5DYIqsAOjdrkKqutSfbVcncL+ejOoAQsC39VGN9yOiTa8LmXIGOx8h11RxqzzTgeHLOAGKUM4pFFdzMzJYX0n79YiPAP/O0PUSlHTE9cCXdCJ7zVFxZA4DReA4/gKVMd/WvtJcWKf6e6FlapPgHS0UW3uPyN9b58IuxOFU91Ne+E+kL7cb1Oa5O0zPI0kJaa+XaLIszif21q4x2if+1ClLP/iRrUfYNufQTF79P2ceY2lFaZP5HLqaCFaUxmOSsT3RWD42j4mh4RnQEnTZYP+pCLh1Se2uZF0FZdNC0o16Plf8GgMnwOZ5Eot9GiefVmbQiDbtitif52njcUx+q+TSNTgoZQAlzddblJj7ByWah0htc2LvL7L5Nq9r98YhBLSo2481Vfbkh+DtytljWaiy+3QwgxOnhIfl4AmdoGTXw2eUGq8lwWNCDD1WUBC+hYNyLTf9iZ554RAiPG/jyjYKcR7E1wa3sxKkGh/H4Sp3mULNsVyVvTgxTqYIYmRk5oOK0e0/8fEvH25B/AZyRWA6LDlu9AAAAAElFTkSuQmCC);background-repeat:no-repeat;-webkit-background-position:center;background-position:center;}.css-10hr3p7 .slider.round{border-radius:34px;}.css-10hr3p7 .slider.round:before{border-radius:50%;}</style><div class="css-10hr3p7 e1c69wq20"><label id="switch" class="switch"><input type="checkbox" id="slider" checked=""/><span class="slider round"></span></label></div></li></ul></div></nav><style data-emotion="css 1cph384">.css-1cph384{height:60px;box-shadow:0 3px 6px 0 rgba(0, 0, 0, 0.16);background-color:#f8f8f8;position:relative;display:none;}@media (max-width: 767px){.css-1cph384{display:block;}}</style><div class="css-1cph384 e1217p0e0"><div class="navBarDefault removePadd"><span class="navBarToggle" role="button" tabindex="0"><span class="iconBar"></span><span class="iconBar"></span><span class="iconBar"></span></span></div></div></div><style data-emotion="css o8zoz4">.css-o8zoz4{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;background:#fff;}.css-o8zoz4 .sideBarUL li a{color:#3B454E;}.css-o8zoz4 .sideBarUL .item>a:hover{background-color:#1ed3c6;color:#fff!important;}@media only screen and (max-width: 767px){.css-o8zoz4{display:block;}}</style><div class="css-o8zoz4 e1eqkayb4"><style data-emotion="css kmc1lc">.css-kmc1lc{width:298px;}</style><div class="hiddenMobile css-kmc1lc e1eqkayb1"><style data-emotion="css z7d7m6">.css-z7d7m6{width:100%;height:100vh;overflow:auto;position:fixed;padding-left:0px;position:-webkit-sticky;position:-moz-sticky;position:-webkit-sticky;position:sticky;top:0;padding-right:0;-webkit-box-shadow:-1px 0px 4px 1px rgba(175, 158, 232, 0.4);}@media only screen and (max-width: 1023px){.css-z7d7m6{width:100%;height:100vh;}}@media (min-width: 767px) and (max-width: 1023px){.css-z7d7m6{padding-left:0;}}@media only screen and (max-width: 767px){.css-z7d7m6{padding-left:0px;height:auto;}}</style><aside class="css-z7d7m6 e1sbq3r11"><div class="sidebarTitle hiddenMobile"><a href='https://play.google.com/store/apps/details?id=workshop.soso.jickjicke'>Rala</a><div class='greenCircle'></div><a href='https://github.com/taroguru/rala'>repo</a></div><ul class="sideBarUL"><li class="hideFrontLine firstLevel item "><ul><li class=" item "><ul><li class=" item "><a href="/conference/20231017-mscloudroadshow">공공 디지털 혁신을 위한 클라우드 로드쇼 </a></li></ul></li><li class=" item "><a href="/japs">잡다한 글<button aria-label="collapse" class="collapser"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24"><path d="M0 7.33l2.829-2.83 9.175 9.339 9.167-9.339 2.829 2.83-11.996 12.17z"></path></svg></button></a><ul><li class=" item "><a href="/japs/20200504-introduction">켜져있어서 돌아가는 서비스 운영하기</a></li><li class=" item "><a href="/japs/20200519-category">글 정리</a></li><li class=" item "><a href="/japs/20220516-asynchronous-programming">20220516 Asynchronous Programming</a></li><li class=" item "><a href="/japs/20220516-cache">20220516 Cache</a></li><li class=" item "><a href="/japs/20220517-reinforcementlearning">20220517 Reinforcementlearning</a></li><li class=" item "><a href="/japs/20220922-cloud">20220922 Cloud</a></li><li class=" item "><a href="/japs/20221123-cloud-architecture-interview">20221123 Cloud Architecture Interview</a></li><li class=" item "><a href="/japs/20221213-japjap">잡에러</a></li><li class=" item "><a href="/japs/20221213-toonycolorspro2">[Unity] Toony Colors Pro 2 적용</a></li><li class=" item "><a href="/japs/20221215-awsdrtrainingday">[AWS] DR TrainingDay</a></li><li class=" item "><a href="/japs/20230602-asus-g14-init">[일기] ASUS 노트북 구매 일기 겸 세팅</a></li><li class=" item "><a href="/japs/20230812-g14-2month">[리뷰] G14 4080(2023) 2개월 사용 리뷰</a></li></ul></li><li class=" item "><a href="/sideproject">장난감<button aria-label="collapse" class="collapser"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24"><path d="M0 7.33l2.829-2.83 9.175 9.339 9.167-9.339 2.829 2.83-11.996 12.17z"></path></svg></button></a><ul><li class=" item "><a href="/sideproject/20200722-linux-file-aspnetcore-oss">맥에서 ASP.Net Core 빌드하기</a></li><li class=" item "><a href="/sideproject/20210814-cargo-base">컨트리뷰션아카데미의그림자 - Cargo 기초</a></li><li class=" item "><a href="/sideproject/20210814-rust-base">컨트리뷰션아카데미의그림자 - Rust 기초</a></li><li class=" item "><a href="/sideproject/20221026-rala">20221026 Rala</a></li><li class=" item "><a href="/sideproject/20230805-game-01">unity pixel art</a></li><li class=" item "><a href="/sideproject/20230811-tilemapgenerator">타일맵 생성</a></li></ul></li><li class=" item "><a href="/20221116_googleworkspace">20221116 Googleworkspace</a></li><li class=" item "><a href="/automation">프로비저닝과 자동화<button aria-label="collapse" class="collapser"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24"><path d="M0 7.33l2.829-2.83 9.175 9.339 9.167-9.339 2.829 2.83-11.996 12.17z"></path></svg></button></a><ul><li class=" item "><a href="/automation/20200513-ansible">Ansible로 로컬 스크립트를 원격 서버에서 실행</a></li><li class=" item "><a href="/automation/20200522-vcenter">vCenter Server for Windows to vCenter Server Appliance</a></li><li class=" item "><a href="/automation/20200525-tomcat-update">Tomcat 업데이트(9.0.16-&gt;9.0.37)</a></li><li class=" item "><a href="/automation/20200602-ansible-windows-server">Ansible로 윈도우 서버 관리</a></li><li class=" item "><a href="/automation/20210114-apache-security">아파치 보안 설정</a></li><li class=" item "><a href="/automation/20211110-install_awx">AWX(Ansbie) 설치</a></li></ul></li><li class=" item "><a href="/cicd">CI/CD<button aria-label="collapse" class="collapser"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24"><path d="M0 7.33l2.829-2.83 9.175 9.339 9.167-9.339 2.829 2.83-11.996 12.17z"></path></svg></button></a><ul><li class=" item "><a href="/cicd/20200527-msbuild">MSBuild와 NuGet</a></li></ul></li><li class=" item "><a href="/coding">개발<button aria-label="collapse" class="collapser"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24"><path d="M0 7.33l2.829-2.83 9.175 9.339 9.167-9.339 2.829 2.83-11.996 12.17z"></path></svg></button></a><ul><li class=" item "><a href="/coding/20211005-android-mediaplayer-speed">[Android] MediaPlayer </a></li><li class=" item "><a href="/coding/20211207-dotnet-session-repository">Tomcat+SQL Server에서 돌아가는 CMS 튜닝</a></li><li class=" item "><a href="/coding/20211213-javascript">JavaScript</a></li><li class=" item "><a href="/coding/20220204-typescript">TypeScript Cheetsheet</a></li><li class=" item "><a href="/coding/20220419-svelte-cheatsheet">Svelte 훓어보기</a></li><li class=" item "><a href="/coding/20220421-promise">promise</a></li><li class=" item "><a href="/coding/20220506-codility-binrarygap">Codility BinaryGap</a></li><li class=" item "><a href="/coding/20220506-kotlin">Kotlin 훓어보기</a></li><li class=" item "><a href="/coding/20220507-rotatearray">20220507 Rotatearray</a></li><li class=" item "><a href="/coding/20220508-OddOccurrencesInArray">20220508 Odd Occurrences In Array</a></li><li class=" item "><a href="/coding/20220509-fontmetrics">20220509 Fontmetrics</a></li><li class=" item "><a href="/coding/20220532-googledrive">Svelte 훓어보기</a></li><li class=" item "><a href="/coding/20220615-bstartuptalk">20220615 Bstartuptalk</a></li><li class=" item "><a href="/coding/20220701-csharp-lambda">C# Lambda</a></li><li class=" item "><a href="/coding/20220701-kickstart">Google Kickstart</a></li><li class=" item "><a href="/coding/20220819-gamedev-japnote">만들자 게임</a></li><li class=" item "><a href="/coding/20230104-unity-ecs">Unity ECS(from 2022.2 테크 스트림)</a></li><li class=" item "><a href="/coding/20240202-getandsetwindow">[WinAPI] C#에서 GetWindowLong(), SetWindowLong() 호출</a></li><li class=" item "><a href="/coding/20240220-encode_string">[Java] Android에서 mqtt 수신시 문자열 깨짐</a></li><li class=" item "><a href="/coding/20240509-python">python 좀 헷갈리는 부분들</a></li><li class=" item "><a href="/coding/20240615-android-sdk-version">올려보자, Android SDK Version</a></li></ul></li><li class=" item "><a href="/configuration">설정<button aria-label="collapse" class="collapser"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24"><path d="M0 7.33l2.829-2.83 9.175 9.339 9.167-9.339 2.829 2.83-11.996 12.17z"></path></svg></button></a><ul><li class=" item "><a href="/configuration/20200521-vnc">CentOS 7 원격 데스크탑 사용을 위한 VNC Server 설치</a></li><li class=" item "><a href="/configuration/20200921-DNS-MAIL">전자 메일 인증 - SPF, DKIM, DMARC</a></li><li class=" item "><a href="/configuration/20210120-clone-linux">리눅스 복제 준비</a></li><li class=" item "><a href="/configuration/20210218-kubernetes-on-premise">Kubernetes 정리</a></li><li class=" item "><a href="/configuration/20210310-wordpress-server-memory-issue">워드프레스(httpd+php+mysql) 서버 지속적인 메모리 감소 이슈</a></li><li class=" item "><a href="/configuration/20210917-govc">govc로 vCenter 로그인</a></li><li class=" item "><a href="/configuration/20211207-extenddisk">VMware 가상머신 CentOS 6.x 디스크 관리</a></li><li class=" item "><a href="/configuration/20211216-bigip-remove-http-header">Big-IP에서 특정 HTTP 응답 헤더 삭제하기</a></li><li class=" item "><a href="/configuration/20220530-firewall-cmd">firewalld Cheatsheet</a></li><li class=" item "><a href="/configuration/20221013-limit-http-method-httpd">Apache httpd에서 특정 method 제한</a></li><li class=" item "><a href="/configuration/20221013-lotatelog">logrotate로 로그 파일 돌리기</a></li></ul></li><li class=" item "><a href="/daily">일기<button aria-label="collapse" class="collapser"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24"><path d="M0 7.33l2.829-2.83 9.175 9.339 9.167-9.339 2.829 2.83-11.996 12.17z"></path></svg></button></a><ul><li class=" item "><a href="/daily/20220511">다이어리</a></li><li class=" item "><a href="/daily/20220815-awsinterview">인터뷰 후기</a></li><li class=" item "><a href="/daily/20221103-greenbonus">무배당 그린보너스저축보험</a></li><li class=" item "><a href="/daily/20230103-diary">20230103 Diary</a></li><li class=" item "><a href="/daily/20230801">2023-08-01, 일기</a></li><li class=" item "><a href="/daily/20231002-notebook-audio-chipset">노트북 오디오 칩셋 찾기</a></li></ul></li><li class=" item "><a href="/infra">인뿌라스트락쨔<button aria-label="collapse" class="collapser"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24"><path d="M0 7.33l2.829-2.83 9.175 9.339 9.167-9.339 2.829 2.83-11.996 12.17z"></path></svg></button></a><ul><li class=" item "><a href="/infra/20220722-monitoring-using-snmp">Zabbix와 SNMP를  이용하여 Cisco 장비 모니터링</a></li><li class=" item "><a href="/infra/20220801-vcenter-webclient-503">20220801 Vcenter Webclient 503</a></li><li class=" item "><a href="/infra/20220914-dotnet-windows-logging">20220914 Dotnet Windows Logging</a></li><li class=" item "><a href="/infra/20220926-nginx">20220926 Nginx</a></li><li class=" item "><a href="/infra/20221025-ssh">20221025 Ssh</a></li><li class=" item "><a href="/infra/20221104-docker-no-space">Docker) No space left on device </a></li><li class=" item "><a href="/infra/20221111-smbmountonlinux">SMB 마운트. 윈도우 공유 폴더를 리눅스에서 마운트</a></li><li class=" item "><a href="/infra/20221122-centos7-boot-cli">CentOS 7. run level 설정. 부팅시 GUI 데스크탑/CLI 설정. </a></li><li class=" item "><a href="/infra/20221129-zabbix-migration">CentOS 7. run level 설정. 부팅시 GUI 데스크탑/CLI 설정. </a></li><li class=" item "><a href="/infra/20221130-zabbix-password-update">Zabbix 비밀번호 업데이트(5.0 or higher)</a></li><li class=" item "><a href="/infra/20221201-zabbix-telegram-webhook-not-work">Zabbix 6.2 Telegram Webhook 동작하지 않음</a></li><li class=" item "><a href="/infra/20221201-zabbix-unreachablepoller-75-busy">Zabbix - unreachable poller processes more than 75% busy</a></li><li class=" item "><a href="/infra/20221207-freq-linux-cmd">자주쓰는 리눅스 명령어</a></li><li class=" item "><a href="/infra/20230323-rancher-install">[Kubernetes] Rancher를 이용한 클러스터 구성</a></li><li class=" item "><a href="/infra/20230329-nutanix">Nutanix Basic Bootcamp</a></li><li class=" item "><a href="/infra/20230331-authentication-with-ad-on-rancher">[Kubernetes] Rancher와 Active Directory 인증</a></li><li class=" item "><a href="/infra/20230331-deployment-workload-on-rancher">[Kubernetes] Rancher에 웹서비스 배포</a></li><li class=" item "><a href="/infra/20230407-bind-zabbix-monitor">[Zabbix] Zabbix에서 named 모니터링하기</a></li><li class=" item "><a href="/infra/Untitled-1">Untitled 1</a></li><li class=" item "><a href="/infra/aws">AWS 기타</a></li><li class=" item "><a href="/infra/bigip-tcpconnection">F5 BIG-IP TCP 연결 흐름</a></li><li class=" item "><a href="/infra/connect-gitlab-kubernetes">GitLab에서 Kubernetes 관리</a></li><li class=" item "><a href="/infra/dhcp-cleanup-expired-clients">[Windows Server] DHCP 서버에서 기간 만료된 클라이언트 IP가 남아있을 떄?</a></li><li class=" item "><a href="/infra/docker_cheatsheet">Docker cheatsheet</a></li><li class=" item "><a href="/infra/git_cheatsheet">Git cheatsheet</a></li><li class=" item "><a href="/infra/jenkins_cheatsheet">Jenkins Cheatsheet</a></li><li class=" item "><a href="/infra/kubernetes_auth">Active Directory를 이용한 Kubenetes 인증</a></li><li class=" item "><a href="/infra/kubernetes_cheatsheet">Kubernetes cheatsheet</a></li><li class=" item "><a href="/infra/linux_cheatsheet">Linux cheatsheet</a></li><li class=" item "><a href="/infra/mysql-characterset">MySQL Characterset utf8, utfmb3, utfmb4</a></li><li class=" item "><a href="/infra/prometheus_cheatsheet">Prometheus - Kubernetes Monitoring Cheatsheet</a></li><li class=" item "><a href="/infra/tomcat-jmx-with-zabbix">Zabbix로 Tomcat(JMX)모니터링</a></li><li class=" item "><a href="/infra/tomcat-jmx-with-zabbix copy">Tomcat 모니터링 주요 지표와 Zabbix Item</a></li><li class=" item "><a href="/infra/vagrant_cheatsheet">Vagrant cheatsheet</a></li><li class=" item "><a href="/infra/vagrant_cheetsheet">Vagrant cheetsheet</a></li><li class=" item "><a href="/infra/zabbix-upgrade">Zabbix 4.0 to 6.0</a></li></ul></li><li class=" item "><a href="/ml">머신러닝<button aria-label="collapse" class="collapser"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24"><path d="M0 7.33l2.829-2.83 9.175 9.339 9.167-9.339 2.829 2.83-11.996 12.17z"></path></svg></button></a><ul><li class=" item "><a href="/ml/20211224-aws-ml">[AWS] The machine learning pipeline on aws</a></li></ul></li><li class=" item "><a href="/monitoring">모니터링과 로깅<button aria-label="collapse" class="collapser"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24"><path d="M0 7.33l2.829-2.83 9.175 9.339 9.167-9.339 2.829 2.83-11.996 12.17z"></path></svg></button></a><ul><li class=" item "><a href="/monitoring/20201212-zabbix-api">Zabbix API를 이용한 히스토리 정보를 CSV로 뽑기</a></li></ul></li><li class=" item "><a href="/study">학습<button aria-label="collapse" class="collapser"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24"><path d="M0 7.33l2.829-2.83 9.175 9.339 9.167-9.339 2.829 2.83-11.996 12.17z"></path></svg></button></a><ul><li class=" item "><a href="/study/20200510-mapreduce">MapReduce 학습</a></li><li class=" item "><a href="/study/20200818-azure">Azure Fundamentals</a></li><li class=" item "><a href="/study/20200901-kubernetes">Kubenetes with VMware(On-Premise)</a></li><li class=" item "><a href="/study/20210427-managing-kubernetes">매니징 쿠버네티스</a></li><li class=" item "><a href="/study/20211126-tcpdump-log">tcpdump 로그 읽기</a></li><li class=" item "><a href="/study/20211217-rfc3330">[RFC3330] Special-Use IPv4 Addresses</a></li><li class=" item "><a href="/study/20220308-css">CSS 학습</a></li><li class=" item "><a aria-current="page" class="" href="/study/202230408-ckad2">[CKAD] Kubernetes Certificate Application Developer(CKAD) with Tests 학습노트(2/)</a></li><li class=" item "><a href="/study/2023-0402-CKAD-test">[CKAD] Kubernetes Certificate Application Developer(CKAD) with Tests 학습노트(1/)</a></li><li class=" item "><a href="/study/20230401-cka">[CKA] Certified Kubernetes Administrator (CKA) with Practice Tests Notes</a></li><li class=" item "><a href="/study/20230420-pass">[교육] PAAS</a></li><li class=" item "><a href="/study/20230421-paas-2nd">[교육] PAAS 2일차</a></li><li class=" item "><a href="/study/20230421-paas-3rd">[CKAD] Kubernetes Certificate Application Developer(CKAD) with Tests 학습노트(3/)</a></li><li class=" item "><a href="/study/20230507-ckad_3">[CKAD] Kubernetes Certificate Application Developer(CKAD) with Tests 학습노트(3/)</a></li><li class=" item "><a href="/study/20230521-ckad-정리">[CKAD] Kubernetes Certificate Application Developer(CKAD) with Tests 문제 정리</a></li><li class=" item "><a href="/study/20230521-vim">자주쓰는 vim 커맨드</a></li><li class=" item "><a href="/study/20230530-cka-01">[CKA] Kubernetes Certificate Administrator(CKA) with Tests 학습노트(1/)</a></li><li class=" item "><a href="/study/20230530-heredoc">20230530 Heredoc</a></li><li class=" item "><a href="/study/20230608-cka-2">[CKA] Kubernetes Certificate Administrator(CKA) with Tests 학습노트(2/)</a></li><li class=" item "><a href="/study/20230609-cka-test">[CKA] Kubernetes Certificate Administrator(CKA) with Tests 문제 정리</a></li><li class=" item "><a href="/study/20230611-kubernetesnetwork">쿠버네티스 네트워크</a></li><li class=" item "><a href="/study/20230720-security-certification">보안기사</a></li><li class=" item "><a href="/study/20230813-kubernetes_on_virtualbox_using_vagrant">vagrant와 virtualbox을 이용하여 윈도우에 개발용 쿠버네티스 클러스터 구축</a></li><li class=" item "><a href="/study/20230813-kubernetes_on_wsl_using_vagrant">vagrant와 virtualbox을 이용하여 윈도우에 개발용 쿠버네티스 클러스터 구축</a></li><li class=" item "><a href="/study/20230911-cks-01">CKS 준비 - </a></li><li class=" item "><a href="/study/20231013-cks-test">[CKS] Kubernetes CKS 2023 Complete Course - Theory - Practice</a></li><li class=" item "><a href="/study/20231023-kubectl-windows-install">[Rancher] kubectl 윈도우 설치</a></li><li class=" item "><a href="/study/20231023-rancher-update-tls">[Rancher] Rancher SSL/TLS 인증서 업데이트</a></li><li class=" item "><a href="/study/20231117-vmware-compatibility">VMWare EVC 모드 활성화와 vMotion</a></li><li class=" item "><a href="/study/20240207-uart">[네트워크?] UART - Universal asynchronous receiver/transmitter</a></li></ul></li><li class=" item "><a href="/worklog">작업일지<button aria-label="collapse" class="collapser"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24"><path d="M0 7.33l2.829-2.83 9.175 9.339 9.167-9.339 2.829 2.83-11.996 12.17z"></path></svg></button></a><ul><li class=" item "><a href="/worklog/20200505-buildblog">Gatsby로 블로그 만들어 Github Pages에 배포하기</a></li><li class=" item "><a href="/worklog/20200515-nginx_dotnetcore">Linux에서 Nginx + ASP.NET Core로 웹서비스 돌리기</a></li><li class=" item "><a href="/worklog/20200702-linux-file-recover">리눅스 파일 복구</a></li><li class=" item "><a href="/worklog/20210518-downgrade-hwversion-vmware-vm">VMware 가상머신 하드웨어 버전 다운그레이드</a></li><li class=" item "><a href="/worklog/20210815-github-personalaccesstoken">GitHub - Personal Access Token</a></li><li class=" item "><a href="/worklog/20210815-node-version">Netlify 빌드 에러 - The engine node is incompatible with this module. Expected version &gt;=12.</a></li><li class=" item "><a href="/worklog/20210829-pythonversion-mac">맥에서 기본 파이선 버전 설정</a></li><li class=" item "><a href="/worklog/20210908-change-blog-with-gatsby">Gatsby Starter 수정. 플러그인 중심으로.</a></li><li class=" item "><a href="/worklog/20210928-powershell">[PowerShell] 사용자에게 폴더 권한(읽기/쓰기 등) 부여</a></li><li class=" item "><a href="/worklog/20211027-loadtest">Tomcat+SQL Server에서 돌아가는 CMS 튜닝</a></li><li class=" item "><a href="/worklog/20220314-oracle-lock">Oracle이가 응답하지 않는다. wait, latch, lock and ...</a></li><li class=" item "><a href="/worklog/20220415-cron-notroot">cron으로 Tomcat 재시작</a></li></ul></li><li class=" item "><a href="/yakun">야-근<button aria-label="collapse" class="collapser"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24"><path d="M0 7.33l2.829-2.83 9.175 9.339 9.167-9.339 2.829 2.83-11.996 12.17z"></path></svg></button></a><ul><li class=" item "><a href="/yakun/20211201-keyboard">키보드</a></li></ul></li></ul></li><style data-emotion="css 1q387v1">.css-1q387v1{list-style:none;padding:0.5rem 0;}.css-1q387v1 hr{margin:0;padding:0;border:0;border-bottom:1px solid #ede7f3;}</style><li class="css-1q387v1 e1sbq3r10"><hr/></li><style data-emotion="css k0rhaf">.css-k0rhaf{list-style:none;}.css-k0rhaf a{color:#5c6975;-webkit-text-decoration:none;text-decoration:none;font-weight:400;padding:0.45rem 0 0.45rem 2rem;display:block;position:relative;}.css-k0rhaf a:hover{color:#1ed3c6!important;}.css-k0rhaf a svg{float:right;margin-right:1rem;}</style><li class="css-k0rhaf e1sbq3r12"><a href="https://github.com/taroguru" to="https://github.com/taroguru" target="_blank" rel="noopener noreferrer">GitHub<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg></a></li></ul></aside></div><div class="sidebarTitle sideBarShow"><a href='https://play.google.com/store/apps/details?id=workshop.soso.jickjicke'>Rala</a><div class='greenCircle'></div><a href='https://github.com/taroguru/rala'>repo</a></div><style data-emotion="css 9bc759">.css-9bc759{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;margin:0px 88px;padding-top:3rem;background:#fff;}.css-9bc759 table tr{background:#fff;}@media only screen and (max-width: 1023px){.css-9bc759{padding-left:0;margin:0 10px;padding-top:3rem;}}</style><main class="css-9bc759 e1eqkayb3"><style data-emotion="css rnnnrd">@media only screen and (max-width: 50rem){.css-rnnnrd{width:100%;position:relative;}}</style><div class="css-rnnnrd e1eqkayb2"><div class="titleWrapper"><style data-emotion="css 1gg19kx">.css-1gg19kx{font-size:32px;line-height:1.5;font-weight:500;border-left:2px solid #1ed3c6;padding:0 16px;-webkit-flex:1;-ms-flex:1;flex:1;margin-top:0;padding-top:0;color:#000;}</style><h1 class="css-1gg19kx e1m7sxnn2">[CKAD] Kubernetes Certificate Application Developer(CKAD) with Tests 학습노트(2/)</h1><style data-emotion="css 1vkevom">.css-1vkevom{padding:1rem 1.5rem;text-align:right;}.css-1vkevom a{font-size:14px;font-weight:500;line-height:1em;-webkit-text-decoration:none;text-decoration:none;color:#555;border:1px solid rgb(211, 220, 228);cursor:pointer;border-radius:3px;-webkit-transition:all 0.2s ease-out 0s;transition:all 0.2s ease-out 0s;-webkit-text-decoration:none;text-decoration:none;color:rgb(36, 42, 49);background-color:rgb(255, 255, 255);box-shadow:rgba(116, 129, 141, 0.1) 0px 1px 1px 0px;height:30px;padding:5px 16px;}.css-1vkevom a:hover{background-color:rgb(245, 247, 249);}</style><div class="mobileView css-1vkevom e1m7sxnn1"><a href="https://github.com/taroguru/study/202230408-ckad2.md" class="gitBtn"><img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAyMi4xLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjxzdmcgdmVyc2lvbj0iMS4yIiBiYXNlUHJvZmlsZT0idGlueSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiDQoJIHg9IjBweCIgeT0iMHB4IiB2aWV3Qm94PSIwIDAgMjM1MCAyMzE0LjgiIHhtbDpzcGFjZT0icHJlc2VydmUiPg0KPHBhdGggZD0iTTExNzUsMEM1MjUuOCwwLDAsNTI1LjgsMCwxMTc1YzAsNTUyLjIsMzc4LjksMTAxMC41LDg5MC4xLDExMzkuN2MtNS45LTE0LjctOC44LTM1LjMtOC44LTU1Ljh2LTE5OS44SDczNC40DQoJYy03OS4zLDAtMTUyLjgtMzUuMi0xODUuMS05OS45Yy0zOC4yLTcwLjUtNDQuMS0xNzkuMi0xNDEtMjQ2LjhjLTI5LjQtMjMuNS01LjktNDcsMjYuNC00NC4xYzYxLjcsMTcuNiwxMTEuNiw1OC44LDE1OC42LDEyMC40DQoJYzQ3LDYxLjcsNjcuNiw3Ni40LDE1NS43LDc2LjRjNDEuMSwwLDEwNS43LTIuOSwxNjQuNS0xMS44YzMyLjMtODIuMyw4OC4xLTE1NS43LDE1NS43LTE5MC45Yy0zOTMuNi00Ny01ODEuNi0yNDAuOS01ODEuNi01MDUuMw0KCWMwLTExNC42LDQ5LjktMjIzLjMsMTMyLjItMzE3LjNjLTI2LjQtOTEuMS02MS43LTI3OS4xLDExLjgtMzUyLjVjMTc2LjMsMCwyODIsMTE0LjYsMzA4LjQsMTQzLjljODguMS0yOS40LDE4NS4xLTQ3LDI4NC45LTQ3DQoJYzEwMi44LDAsMTk2LjgsMTcuNiwyODQuOSw0N2MyNi40LTI5LjQsMTMyLjItMTQzLjksMzA4LjQtMTQzLjljNzAuNSw3MC41LDM4LjIsMjYxLjQsOC44LDM1Mi41YzgyLjMsOTEuMSwxMjkuMywyMDIuNywxMjkuMywzMTcuMw0KCWMwLDI2NC40LTE4NS4xLDQ1OC4zLTU3NS43LDQ5OS40YzEwOC43LDU1LjgsMTg1LjEsMjE0LjQsMTg1LjEsMzMxLjlWMjI1NmMwLDguOC0yLjksMTcuNi0yLjksMjYuNA0KCUMyMDIxLDIxMjMuOCwyMzUwLDE2ODkuMSwyMzUwLDExNzVDMjM1MCw1MjUuOCwxODI0LjIsMCwxMTc1LDBMMTE3NSwweiIvPg0KPC9zdmc+DQo=" alt="Github logo"/> Edit on GitHub</a></div></div><style data-emotion="css uipcji">.css-uipcji{max-width:750px;color:#3B454E;}.css-uipcji ul,.css-uipcji ol{-webkit-padding-start:40px;-moz-padding-start:40px;-o-padding-start:40px;margin:24px 0px;padding:0px 0px 0px 2em;}.css-uipcji ul li,.css-uipcji ol li{font-size:16px;line-height:1.8;font-weight:400;}.css-uipcji a{-webkit-transition:color 0.15s;transition:color 0.15s;color:#1000EE;}.css-uipcji code{border:1px solid #ede7f3;border-radius:4px;padding:2px 6px;font-size:0.9375em;background:#fff;}@media (max-width: 767px){.css-uipcji{padding:0 15px;}}</style><div class="css-uipcji e1m7sxnn0"><h2 class="heading2" id="개요:ckad">개요 : CKAD</h2><p class="paragraph">쿠버네티스 학습, 자격증 취득 등.
Kubernetes Certificate Application Developer with Tests 학습 두 번째 글. </p><ul><li>Docker</li></ul><h2 class="heading2" id="docker">Docker</h2><p class="paragraph">이미지는 결국 도커로 말아야 한다.
말때 정의는 docker에 되어 있다.</p><p class="paragraph">5초를 슬립하는 우분투 이미지를 빌드하려면 dockerifle을 아래와 같이 정의하고 빌드 명령을 수행하면 된다.</p><style data-emotion="css fkgcw9">.css-fkgcw9{padding:16px;background:rgb(245, 247, 249);}</style><pre class="css-fkgcw9 ev1gfv90"><pre><pre class="prism-code language-javascript pre" style="color:#9CDCFE;background-color:#1E1E1E" p="3"><div class="token-line"><span class="token keyword module" style="color:rgb(86, 156, 214)">from</span><span class="token plain"> ubuntu     </span></div><div class="token-line"><span class="token plain">cmd sleep </span><span class="token number" style="color:rgb(181, 206, 168)">5</span><span class="token plain">     </span></div></pre></pre></pre><pre class="css-fkgcw9 ev1gfv90"><pre><pre class="prism-code language-bash pre" style="color:#9CDCFE;background-color:#1E1E1E" p="3"><div class="token-line"><span class="token plain">docker build -t ubuntu-sleeper </span><span class="token builtin class-name" style="color:rgb(78, 201, 176)">.</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">docker run ubuntu-sleeper</span></div></pre></pre></pre><p class="paragraph">하지만 매번 초가 5, 6, 7, 8로 바뀐다면 어떨까. 파라미터를 던질 수 있는데
이때는 cmd 가 아니라 entrypoint를 선언하면 된다.</p><pre class="css-fkgcw9 ev1gfv90"><pre><pre class="prism-code language-javascript pre" style="color:#9CDCFE;background-color:#1E1E1E" p="3"><div class="token-line"><span class="token keyword module" style="color:rgb(86, 156, 214)">from</span><span class="token plain"> ubuntu     </span></div><div class="token-line"><span class="token plain">entrypoint </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;sleep&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"></span></div></pre></pre></pre><pre class="css-fkgcw9 ev1gfv90"><pre><pre class="prism-code language-bash pre" style="color:#9CDCFE;background-color:#1E1E1E" p="3"><div class="token-line"><span class="token plain">docker build -t ubuntu-sleeper </span><span class="token builtin class-name" style="color:rgb(78, 201, 176)">.</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">docker run ubuntu-sleeper </span><span class="token number" style="color:rgb(181, 206, 168)">5</span><span class="token plain"> </span></div></pre></pre></pre><p class="paragraph">기본 파라메터는 어떻게 줄수 있을까. entrypoint바로 다음 cmd를 넣어서 처리할 수 있다. 이 때 파라메터를 넣으면 뒤쪽 cmd 는 무시된다</p><pre class="css-fkgcw9 ev1gfv90"><pre><pre class="prism-code language-javascript pre" style="color:#9CDCFE;background-color:#1E1E1E" p="3"><div class="token-line"><span class="token keyword module" style="color:rgb(86, 156, 214)">from</span><span class="token plain"> ubuntu     </span></div><div class="token-line"><span class="token plain">entrypoint </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;sleep&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">cmd </span><span class="token number" style="color:rgb(181, 206, 168)">5</span><span class="token plain"></span></div></pre></pre></pre><p class="paragraph">entrypoint자체를 바꾸고 싶으면 어떻게 해야 할까? --entrypoint옵션을 주면 entrypoint를 덮어쓴다.</p><pre class="css-fkgcw9 ev1gfv90"><pre><pre class="prism-code language-bash pre" style="color:#9CDCFE;background-color:#1E1E1E" p="3"><div class="token-line"><span class="token plain">docker run --entrypoint sleep2.0 ubuntu-sleeper </span><span class="token number" style="color:rgb(181, 206, 168)">5</span><span class="token plain"></span></div></pre></pre></pre><h2 class="heading2" id="commandandarguments">command and arguments</h2><p class="paragraph">도커 이미지를 실행할 때 쓰던 entrypoint와 cmd는 쿠버네티스에서 어떻게 대체할 수 있을까? <strong>command</strong>와 <strong>args</strong>를 사용하면 된다.</p><pre class="css-fkgcw9 ev1gfv90"><pre><pre class="prism-code language-yaml pre" style="color:#9CDCFE;background-color:#1E1E1E" p="3"><div class="token-line"><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> v1</span></div><div class="token-line"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> Pod</span></div><div class="token-line"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> ubuntu</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">sleeper</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">pod</span></div><div class="token-line"><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token key atrule">containers</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> ubuntu</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">sleeper</span></div><div class="token-line"><span class="token plain">      </span><span class="token key atrule">image</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> ubuntu</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">sleeper</span></div><div class="token-line"><span class="token plain">      </span><span class="token key atrule">command</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;sleep2.0&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain">     &lt;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> entrypoint </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;sleep2.0&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"> 동일</span></div><div class="token-line"><span class="token plain">      </span><span class="token key atrule">args</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;10&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain">              &lt;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> cmd </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;10&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"> 동일</span></div></pre></pre></pre><h2 class="heading2" id="kubectledit실패관련">kubectl edit 실패 관련</h2><p class="paragraph">kubectl edit으로 리소스를 수정하려고 하면 일부 주요 옵션들에 대한 수정이 불가능하다는 메세지를 출력한다. 이때 적용이 실패한 yaml파일이 저장되므로 수정에 실패한 리소스 삭제 후 해당 yaml 파일을 이용하여 재생성하자.</p><pre class="css-fkgcw9 ev1gfv90"><pre><pre class="prism-code language-bash pre" style="color:#9CDCFE;background-color:#1E1E1E" p="3"><div class="token-line"><span class="token plain">$ kubectl edit pod redis</span></div><div class="token-line"><span class="token plain">A copy of your changes has been stored to </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;/var/folders/1l/zy49b0n13rq2kym45rvv1ts40000gn/T/kubectl-edit-809005869.yaml&quot;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">error: At least one of apiVersion, kind and name was changed</span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain">$ kubectl delete pod redis</span></div><div class="token-line"><span class="token plain">$ kueectl create -f </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;/var/folders/1l/zy49b0n13rq2kym45rvv1ts40000gn/T/kubectl-edit-809005869.yaml&quot;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain">or</span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain">$ kubectl replace --force -f </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;/var/folders/1l/zy49b0n13rq2kym45rvv1ts40000gn/T/kubectl-edit-809005869.yaml&quot;</span><span class="token plain"></span></div></pre></pre></pre><p class="paragraph">이미지 내부에서 수행되는 프로그램에게 던지는 인수(예를 들어 dockerfile의 cmd)는 <strong>--</strong>를 사용하면 된다. 예를 들어 실행되는 컨테이너 이미지에 --color green이라는 파라메터를 전달하려면 아래와 같이 -- 다음에 적어주면 된다.</p><pre class="css-fkgcw9 ev1gfv90"><pre><pre class="prism-code language-bash pre" style="color:#9CDCFE;background-color:#1E1E1E" p="3"><div class="token-line"><span class="token plain">kuberctl run webap-green --image</span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain">kudekloud/webapp-color -- --color green</span></div></pre></pre></pre><h2 class="heading2" id="환경변수">환경변수</h2><p class="paragraph">프로그램 실행마다 파라미터를 던질 수도 있지만, 환경 변수로 설정할 수 있다.</p><h3 class="heading3" id="plainkeyvalue">plain key value</h3><p class="paragraph">가장 기본적인 환경변수다</p><pre class="css-fkgcw9 ev1gfv90"><pre><pre class="prism-code language-yaml pre" style="color:#9CDCFE;background-color:#1E1E1E" p="3"><div class="token-line"><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token key atrule">containers</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token key atrule">env</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> APP_COLOR</span></div><div class="token-line"><span class="token plain">      </span><span class="token key atrule">value</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> pink</span></div></pre></pre></pre><h3 class="heading3" id="configmap">ConfigMap</h3><p class="paragraph">여러 pod에서 동시에 사용하기 위하여 클러스터에서 관리하는 환경변수를 ConfigMap이라고 부른다. </p><p class="paragraph">예를 들어, app-config라는 configmap에 app_color=blue라는 환경변수와, app_mod=prod라는 환경변수를 추가하고 싶다면 아래와 같이 실행하면 된다. 하나의 컨피그맵에 여러개의 환경 변수를 담을 수 있다.</p><pre class="css-fkgcw9 ev1gfv90"><pre><pre class="prism-code language-bash pre" style="color:#9CDCFE;background-color:#1E1E1E" p="3"><div class="token-line"><span class="token plain">kubectl create configmap app-config --from-literal</span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain">APP_COLOR</span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain">blue --from-literal</span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain">APP_MODE</span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain">prod</span></div></pre></pre></pre><p class="paragraph">하나하나 치면 복잡하니까 파일로 만들어 둘 수도 있다.</p><pre class="css-fkgcw9 ev1gfv90"><pre><pre class="prism-code language-bash pre" style="color:#9CDCFE;background-color:#1E1E1E" p="3"><div class="token-line"><span class="token plain">kubectl create configmap app-config --from-file</span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain">app_config.properties</span></div></pre></pre></pre><p class="paragraph">yaml로 정의하면 다음과 같이 정의할 수 있다.</p><pre class="css-fkgcw9 ev1gfv90"><pre><pre class="prism-code language-yaml pre" style="color:#9CDCFE;background-color:#1E1E1E" p="3"><div class="token-line"><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> v1</span></div><div class="token-line"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> ConfigMap</span></div><div class="token-line"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> app</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">config</span></div><div class="token-line"><span class="token plain"></span><span class="token key atrule">data</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token key atrule">APP-COLOR</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> blue</span></div><div class="token-line"><span class="token plain">  </span><span class="token key atrule">APP_MODE</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> prod</span></div></pre></pre></pre><h3 class="heading3" id="configmap참조">Configmap 참조</h3><p class="paragraph">이제 pod에서 생성한 ConfigMap을 참조해보자.</p><pre class="css-fkgcw9 ev1gfv90"><pre><pre class="prism-code language-yaml pre" style="color:#9CDCFE;background-color:#1E1E1E" p="3"><div class="token-line"><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token key atrule">containers</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token key atrule">envFrom</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token key atrule">configMapRef</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">          </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> app</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">config</span></div></pre></pre></pre><p class="paragraph">특정 값만 참조하고 싶다면(예를 들어 APP_COLOR를 configmap의 APP_COLOR를 사용하고 싶다면..)</p><pre class="css-fkgcw9 ev1gfv90"><pre><pre class="prism-code language-yaml pre" style="color:#9CDCFE;background-color:#1E1E1E" p="3"><div class="token-line"><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token key atrule">containers</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token key atrule">env</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> APP_COLOR</span></div><div class="token-line"><span class="token plain">      </span><span class="token key atrule">valueFrom</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token key atrule">configMapKeyRef</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">          </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> app</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">config</span></div><div class="token-line"><span class="token plain">          </span><span class="token key atrule">key</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> APP_COLOR</span></div></pre></pre></pre><h3 class="heading3" id="secret">Secret</h3><p class="paragraph">그렇다면 DB비밀번호와 같은 평문이 아닌 값은 어떻게 저장할까? 이럴때 secret을 사용한다.</p><pre class="css-fkgcw9 ev1gfv90"><pre><pre class="prism-code language-bash pre" style="color:#9CDCFE;background-color:#1E1E1E" p="3"><div class="token-line"><span class="token plain">kubectl create secret generic </span><span class="token operator" style="color:rgb(212, 212, 212)">&lt;</span><span class="token plain">secret-name</span><span class="token operator" style="color:rgb(212, 212, 212)">&gt;</span><span class="token plain"> --from-literal</span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token operator" style="color:rgb(212, 212, 212)">&lt;</span><span class="token plain">key</span><span class="token operator" style="color:rgb(212, 212, 212)">&gt;</span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token operator" style="color:rgb(212, 212, 212)">&lt;</span><span class="token plain">value</span><span class="token operator" style="color:rgb(212, 212, 212)">&gt;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="background-color:rgba(244, 67, 54, 0.2)"><span class="token operator" style="user-select:none;-moz-user-select:-moz-none;-webkit-user-select:none">-</span><span class="token template-string string" style="color:rgb(206, 145, 120)">-from-file</span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain">옵션 가능</span></div></pre></pre></pre><p class="paragraph">가져다 쓸때는, 1) 환경변수 전체 땡기기 2) 값 하나 땡기기 3) volume 땡기기 중 하나를 사용할 수 있다.</p><h4 class="heading4" id="환경변수전체땡기기">환경변수 전체 땡기기</h4><pre class="css-fkgcw9 ev1gfv90"><pre><pre class="prism-code language-yaml pre" style="color:#9CDCFE;background-color:#1E1E1E" p="3"><div class="token-line"><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token key atrule">containers</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> redis</span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">envFrom</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token key atrule">secretRef</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> &lt;secret</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">name</span><span class="token punctuation" style="color:rgb(212, 212, 212)">&gt;</span><span class="token plain"></span></div></pre></pre></pre><h4 class="heading4" id="환경변수값하나땡기기">환경변수 값 하나 땡기기</h4><pre class="css-fkgcw9 ev1gfv90"><pre><pre class="prism-code language-yaml pre" style="color:#9CDCFE;background-color:#1E1E1E" p="3"><div class="token-line"><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token key atrule">containers</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> redis</span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">env</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> DB_Password</span></div><div class="token-line"><span class="token plain">        </span><span class="token key atrule">valueFrom</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">          </span><span class="token key atrule">secretKeyRef</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">            </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> &lt;secret</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">name</span><span class="token punctuation" style="color:rgb(212, 212, 212)">&gt;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">            </span><span class="token key atrule">key</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> &lt;ENV_KEY_NAME</span><span class="token punctuation" style="color:rgb(212, 212, 212)">&gt;</span><span class="token plain"></span></div></pre></pre></pre><h4 class="heading4" id="파일에서통체로땡기기">파일에서 통체로 땡기기</h4><p class="paragraph">볼륨을 secret으로 땡기면 볼륨 내의 파일명을 key로 파일값을 value로 사용한다.</p><pre class="css-fkgcw9 ev1gfv90"><pre><pre class="prism-code language-yaml pre" style="color:#9CDCFE;background-color:#1E1E1E" p="3"><div class="token-line"><span class="token key atrule">volumes</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> app</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">secret</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">volume</span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">secret</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token key atrule">secretName</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> app</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">secret</span></div></pre></pre></pre><h3 class="heading3" id="secret의암호화">secret의 암호화</h3><p class="paragraph">기본적으로 base64로 <strong>인코딩</strong>된 값이며 <strong>암호화</strong>되지 않는다.
별도의 설정을 해야한다. 아래 문서에서 저장시(secret이 etcd에 저장시) 어떻게 암호화할 수 있는지!?!?? 알아보자
Encrypting Secret Data at Rest
<a href="https://kubernetes.io/docs/tasks/administer-cluster/encrypt-data/" target="_blank" rel="noopener noreferrer">https://kubernetes.io/docs/tasks/administer-cluster/encrypt-data/</a></p><h2 class="heading2" id="도커보안">도커 보안</h2><h3 class="heading3" id="컨테이너보안:유저와권한">컨테이너 보안 : 유저와 권한</h3><p class="paragraph">컨테이너는 커널을 공유한다.
기본적으로 컨테이너에서 수행하는(entrypoint) 프로세스는 루트로 수행된다. 그러면 프로세스의 루트로? 아니다. 호스트 입장에서보면 컨테이너는 도커를 부모로 가지는 자식 프로세스로 생성되며, 별도의 네임스페이스를 가진다.
즉, 컨테이너 내부에서는 root(pid=1)로 프로그램이 실행되지만, 호스트에서는 별도의 pid를 가지며 docker 사용자로 수행된다.</p><p class="paragraph">컨테이너 내에서 root가 아닌 다른 유저로 실행을 하려면</p><ol><li>실행하려는 유저를 dockerfile에 정의</li><li>--user UID 옵션을 추가하여(혹은 dockerfile 안에 USER UID를 정의하여) 실행할 유저 선택
하면 된다.</li></ol><p class="paragraph">일반 유저에게는 시스템 관련 권한이 아무것도 없다. 예를 들어 CAP_NET_BIND_SERVICE가 없는 유저가 http를 서비스하려고 80포트를 expose하면 안된다. &lt; 1024는 웰논 포트(privileged port)로 권한이 있는 유저만 사용할 수 있기 때문이다.
이를 위해 --cap-add 옵션을 이용하여 권한을 부여한다. 유저 권한은 아래 문서에 정의되어 있다.
<a href="https://linux.die.net/man/7/capabilities" target="_blank" rel="noopener noreferrer">https://linux.die.net/man/7/capabilities</a></p><h3 class="heading3" id="쿠버네티스보안">쿠버네티스 보안</h3><p class="paragraph">쿠버네티스의 관점에서 컨테이너는 파드로 캡슐레이션 된다. 파드와 컨테이너 양쪽에 모두 권한을 걸 수 있지만, 둘다 동일 권한이 걸려있다면, 컨테이너의 권한이 파드의 권한을 덮어쓴다.
예를 들어 1000이라는 유저로 프로세스를 실행하는 파드를 정의하자.
파드에 보안 설정(실행유저)을 추가하거나</p><pre class="css-fkgcw9 ev1gfv90"><pre><pre class="prism-code language-yaml pre" style="color:#9CDCFE;background-color:#1E1E1E" p="3"><div class="token-line"><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> v1</span></div><div class="token-line"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token key atrule">securityContext</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">     </span><span class="token key atrule">runAsUser</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">1000</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token key atrule">containers</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token key atrule">image</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span></div></pre></pre></pre><p class="paragraph">컨테이너에 보안 설정(실행유저)을 추가할 수 있다.</p><pre class="css-fkgcw9 ev1gfv90"><pre><pre class="prism-code language-yaml pre" style="color:#9CDCFE;background-color:#1E1E1E" p="3"><div class="token-line"><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> v1</span></div><div class="token-line"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token key atrule">containers</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token key atrule">image</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token key atrule">securityContext</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token key atrule">runAsUser</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">1000</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token key atrule">capabilities</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain">         &lt;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> capabilities는 container아래에만 들어갈 수 있어요</span></div><div class="token-line"><span class="token plain">          </span><span class="token key atrule">add</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;MAC_ADMIN&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"></span></div></pre></pre></pre><p class="paragraph">컨테이너에서 프로세스를 실행하는 유저를 확인하려면 whoami를 실행해서 확인하자.</p><pre class="css-fkgcw9 ev1gfv90"><pre><pre class="prism-code language-bash pre" style="color:#9CDCFE;background-color:#1E1E1E" p="3"><div class="token-line"><span class="token plain">$ kubectl </span><span class="token builtin class-name" style="color:rgb(78, 201, 176)">exec</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">&lt;</span><span class="token plain">podname</span><span class="token operator" style="color:rgb(212, 212, 212)">&gt;</span><span class="token plain"> -- </span><span class="token function" style="color:rgb(220, 220, 170)">whoami</span><span class="token plain"></span></div></pre></pre></pre><h2 class="heading2" id="serviceaccount">ServiceAccount</h2><p class="paragraph">쿠버네티스는 두가지 유형의 계정이 있다.</p><ul><li>user account : 사람이 쓰는 계정. 예를 들어 admin, developer...</li><li>service account : 서비스가 쓰는 계정. 예를 들어 prometheus, buildtools...</li></ul><p class="paragraph">서비스어카운트는 생성고 동시에 토큰이 생성되고, 해당 토큰은 secrets로 저장된다. 해당 토큰은 인증 등에 사용된다. 예를 들어 api서버에 아이디와 토큰을 던져 인증할 수 있다.</p><pre class="css-fkgcw9 ev1gfv90"><pre><pre class="prism-code language-bash pre" style="color:#9CDCFE;background-color:#1E1E1E" p="3"><div class="token-line"><span class="token plain">$ </span><span class="token function" style="color:rgb(220, 220, 170)">curl</span><span class="token plain"> https://localhost:6443/api -insecure --header </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;Authorization: Bearer &lt;token&gt;&quot;</span><span class="token plain"></span></div></pre></pre></pre><p class="paragraph">pod를 생성하면 serviceaccount의 정보를 volume으로 마운트한다.
마운트된 폴더는 아래 세가지 파일을 가진다.</p><ul><li>ca.crt</li><li>namespace</li><li>token</li></ul><p class="paragraph">기본적으로 token의 값을 긁어서 디코딩해보면(<a href="https://jwt.io/#decoded-jwt" target="_blank" rel="noopener noreferrer">https://jwt.io/#decoded-jwt</a>) 토큰에 어떤 정보가 담겨있는지 알 수 있다.</p><h2 class="heading2" id="resource">Resource</h2><p class="paragraph">CPU 자원의 단위. 기본적으로 1이란 1코어를 의미하며, 물리자원에서는 하이퍼쓰레딩된 1쓰레드를 의미한다. 소수점 할당 가능하다.</p><ul><li>1 Azure core, 1GCP Core, 1 AWS EC2 vCPU</li><li>1 Hyperthread</li></ul><p class="paragraph">메모리도 비슷하게 할당할 수 있다. pod에서 사용할 자원을 정의해보면 다음과 같이 정의할 수 있다.</p><pre class="css-fkgcw9 ev1gfv90"><pre><pre class="prism-code language-yaml pre" style="color:#9CDCFE;background-color:#1E1E1E" p="3"><div class="token-line"><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span></div><div class="token-line"><span class="token plain">  </span><span class="token key atrule">containers</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token key atrule">images</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token key atrule">resources</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token key atrule">requests</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain">   &lt;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> 요청자원</span></div><div class="token-line"><span class="token plain">          </span><span class="token key atrule">memory</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;1Gi&quot;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">          </span><span class="token key atrule">cpu</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token key atrule">limits</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain">     &lt;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> 자원 한계</span></div><div class="token-line"><span class="token plain">          </span><span class="token key atrule">memory</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;2Gi&quot;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">          </span><span class="token key atrule">cpu</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">2</span><span class="token plain"></span></div></pre></pre></pre><p class="paragraph">기본 request 자원은 0.5cpu, 256M memory로 설정된다.</p><p class="paragraph">limit을 넘어서면 어떻게 될까? 도커로 말면 그냥 쭉 올라가지만, kubernetes죽여버린다!(terminate) 허거덩...</p><h2 class="heading2" id="taintsandtolerations">Taints and Tolerations</h2><p class="paragraph">어느 파드를 어느 노드에 놓을 것인가? 파드를 어느 노드로 스케줄링할까의 문제에서 사용되는 정의이다. 보안 설정 등을 포함하고 있지는 않다.
<strong>taint</strong>는 오염시키다는 동사로 <strong>노드</strong>를 다양하게 오염 시킨다(스케줄할수 없다거나 실행할 수 없다거나). <strong>Toleration</strong>은 용인한다는 의미로 노드가 taint로 오염되어도 그 오염을 용인하고 실행한다는 의미이다.</p><h3 class="heading3" id="taint">taint</h3><p class="paragraph">어떻게 노드를 오염시킬까? 오염은 아래와 같이 시킬 수 있다.</p><pre class="css-fkgcw9 ev1gfv90"><pre><pre class="prism-code language-bash pre" style="color:#9CDCFE;background-color:#1E1E1E" p="3"><div class="token-line"><span class="token plain">$ kubectl taint nodes </span><span class="token operator" style="color:rgb(212, 212, 212)">&lt;</span><span class="token plain">nodename</span><span class="token operator" style="color:rgb(212, 212, 212)">&gt;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">&lt;</span><span class="token plain">key</span><span class="token operator" style="color:rgb(212, 212, 212)">&gt;</span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token operator" style="color:rgb(212, 212, 212)">&lt;</span><span class="token plain">value</span><span class="token operator" style="color:rgb(212, 212, 212)">&gt;</span><span class="token plain">:</span><span class="token operator" style="color:rgb(212, 212, 212)">&lt;</span><span class="token plain">taint-effect</span><span class="token operator" style="color:rgb(212, 212, 212)">&gt;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">ex</span><span class="token operator" style="color:rgb(212, 212, 212)">&gt;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">$ kubectl taint nodes node1 </span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">app</span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain">blue:NoSchedule</span></div></pre></pre></pre><h4 class="heading4" id="taint-effect">taint-effect</h4><p class="paragraph">테인트 이펙트는 세가지를 가진다.</p><ul><li>NoSchedule : pod를 node에 스케줄링하지 않음. 실행 중인 pod는 유지.</li><li>PreferNoShcedule : 가급적 스케줄링하지 않음. 다른 클러스터 자원 부족시 스케줄링 할 수도 있음.</li><li>NoExecute : pod를 node에 스케줄링하지 않음. 실행 중인 pod도 종료.</li></ul><h3 class="heading3" id="tolerations">tolerations</h3><p class="paragraph">app=blue:noschedule로 오염된 노드에 파드를 배치하려면 어떻게 해야할까.
아래와 같이 파드 spec에 tolerations를 정의하여 오염에 대한 관용성을 표현할 수 있다.</p><pre class="css-fkgcw9 ev1gfv90"><pre><pre class="prism-code language-yaml pre" style="color:#9CDCFE;background-color:#1E1E1E" p="3"><div class="token-line"><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> v1</span></div><div class="token-line"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> Pod</span></div><div class="token-line"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token key atrule">containers</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">...</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token key atrule">tolerations</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token key atrule">key</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;app&quot;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">operator</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;Equal&quot;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">value</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;blue&quot;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">effect</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;NoSchedule&quot;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain">    or </span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token key atrule">key</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;app&quot;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">operator</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;Exists&quot;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">effect</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;NoSchedule&quot;</span><span class="token plain"></span></div></pre></pre></pre><p class="paragraph">tolerations은 관용이라는 의미 그대로 오염된 노드에 배치될 수 있다는 의미이지, 오염된 노드에 배치한다는 의미는 아니다. 파드를 특정 노드에 배치하고 싶으면 nodeaffer?!?를 사용하자.</p><ul><li>마스터 노드에 파드를 배치하지 않는 것도 테인트를 이용한다.</li></ul><h2 class="heading2" id="redinessandliveness">rediness and liveness</h2><p class="paragraph">pod는 status와 condition을 가진다.</p><p class="paragraph">status는 단일 값이다.</p><ul><li>pending : .</li><li>running : condition</li><li>podscheduled</li><li>initialized</li><li>containersready</li><li>ready : 실제로 트래픽을 받을 수 있는 상태
컨테이너가 실행된 상태와 실제로 트래픽을 받는 상태는 다른 상태일 수 있다
(tomcat 초기화 등이 돌면 서버는 올라왔지만 tomcat은 응답을 못준다)
이를 테스트하기 위하여 rediness probe고 컨테이너 상태를 파악한다</li></ul><h3 class="heading3" id="readinessprobe">readinessProbe</h3><pre class="css-fkgcw9 ev1gfv90"><pre><pre class="prism-code language-yaml pre" style="color:#9CDCFE;background-color:#1E1E1E" p="3"><div class="token-line"><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> Pod</span></div><div class="token-line"><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token key atrule">containes</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> redinessProbe</span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">httpGet</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token key atrule">path</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> /api/ready</span></div><div class="token-line"><span class="token plain">      </span><span class="token key atrule">port</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">8080</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token comment" style="color:rgb(106, 153, 85)">#or </span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">tcpSocket</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token key atrule">port</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">3306</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">initialDelaySeconds</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">10</span><span class="token plain"> </span><span class="token comment" style="color:rgb(106, 153, 85)"># 처음 서버가 뜰때까지 기다림</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">periodSeconnd</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">5</span><span class="token plain">        </span><span class="token comment" style="color:rgb(106, 153, 85)"># 반복 주기</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">failureThreshold</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">8</span><span class="token plain">    </span><span class="token comment" style="color:rgb(106, 153, 85)"># 실패 threshold</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token comment" style="color:rgb(106, 153, 85)"># or</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">exec</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token key atrule">command</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> cat</span></div><div class="token-line"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> /app/is_healthy</span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div></pre></pre></pre><h3 class="heading3" id="livenessprobe">livenessProbe</h3><p class="paragraph">정상적인 상태를 체크하고 정상이 아닌 경우 재시작함
readinessProbe는 실행 단계에서 준비가 된지 여부를 판단하고,
livenessProbe는 실행 중 정상 동작 여부를 판단
쓰는 방법은 똑같다.</p><h2 class="heading2" id="logs">logs</h2><h3 class="heading3" id="쿠버네티스로그추적하기">쿠버네티스 로그 추적하기</h3><ul><li>기본 형태</li></ul><pre class="css-fkgcw9 ev1gfv90"><pre><pre class="prism-code language-bash pre" style="color:#9CDCFE;background-color:#1E1E1E" p="3"><div class="token-line"><span class="token plain">kubectl logs -f </span><span class="token operator" style="color:rgb(212, 212, 212)">&lt;</span><span class="token plain">podname</span><span class="token operator" style="color:rgb(212, 212, 212)">&gt;</span><span class="token plain"></span></div></pre></pre></pre><ul><li>멀티플 컨테이너를 가지고 있는 경우 </li></ul><pre class="css-fkgcw9 ev1gfv90"><pre><pre class="prism-code language-bash pre" style="color:#9CDCFE;background-color:#1E1E1E" p="3"><div class="token-line"><span class="token plain">kubectl logs -f </span><span class="token operator" style="color:rgb(212, 212, 212)">&lt;</span><span class="token plain">podname</span><span class="token operator" style="color:rgb(212, 212, 212)">&gt;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">&lt;</span><span class="token plain">containername</span><span class="token operator" style="color:rgb(212, 212, 212)">&gt;</span><span class="token plain"></span></div></pre></pre></pre><h2 class="heading2" id="monitoranddebug">monitor and debug</h2><p class="paragraph">노드와 파드의 자원 모니터링을 어떻게 하면 될까?</p><h3 class="heading3" id="metricsserver">metrics server</h3><ul><li>cAdvisor가 자원 정보를 모은다.</li></ul><pre class="css-fkgcw9 ev1gfv90"><pre><pre class="prism-code language-bash pre" style="color:#9CDCFE;background-color:#1E1E1E" p="3"><div class="token-line"><span class="token plain">kubectl </span><span class="token function" style="color:rgb(220, 220, 170)">top</span><span class="token plain"> node</span></div><div class="token-line"><span class="token plain">kubectl </span><span class="token function" style="color:rgb(220, 220, 170)">top</span><span class="token plain"> pod</span></div></pre></pre></pre><h2 class="heading2" id="job">job</h2><p class="paragraph">배치, 분석, 리포팅 등 다른 자원을 사용하기 위한 자원.
원타임으로 실행되어야 하기 때문에 재시작 정책을 Never로 설정한다.</p><pre class="css-fkgcw9 ev1gfv90"><pre><pre class="prism-code language-yaml pre" style="color:#9CDCFE;background-color:#1E1E1E" p="3"><div class="token-line"><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> batch/v1</span></div><div class="token-line"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> Job</span></div><div class="token-line"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> jobname</span></div><div class="token-line"><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># 3회 반복. 한 job 정상 종료 후 다음 작업 수행</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># 실패하면 3회 성공할 때까지 계속 반복함. 성공 실패 실패 실패 성공 실패 성공(종료)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token key atrule">completions</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">3</span><span class="token plain">  </span></div><div class="token-line"><span class="token plain">  </span><span class="token comment" style="color:rgb(106, 153, 85)"># 병렬 수행</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token key atrule">parallelism</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">3</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token key atrule">template</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">containers</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> continaername</span></div><div class="token-line"><span class="token plain">        </span><span class="token key atrule">image</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> ubuntu</span></div><div class="token-line"><span class="token plain">        </span><span class="token key atrule">command</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;echo&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;hello world!&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;this is job&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token key atrule">restartPolicy</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> Never</span></div></pre></pre></pre><h2 class="heading2" id="cronjob">CronJob</h2><p class="paragraph">크론잡이다. 잡과 다른 부분은 스펙에일정이 들어가서 주기적으로 수행된다는 것이다.</p><pre class="css-fkgcw9 ev1gfv90"><pre><pre class="prism-code language-yaml pre" style="color:#9CDCFE;background-color:#1E1E1E" p="3"><div class="token-line"><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> batch/v1beta1</span></div><div class="token-line"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> cronJob</span></div><div class="token-line"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> jobname</span></div><div class="token-line"><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># 일정이 추가됨</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token key atrule">schedule</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;*/1 * * * *&quot;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token key atrule">completions</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">3</span><span class="token plain"> </span></div><div class="token-line"><span class="token plain">  </span><span class="token key atrule">parallelism</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">3</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token key atrule">template</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">containers</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> continaername</span></div><div class="token-line"><span class="token plain">        </span><span class="token key atrule">image</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> ubuntu</span></div><div class="token-line"><span class="token plain">        </span><span class="token key atrule">command</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;echo&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;hello world!&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;this is job&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token key atrule">restartPolicy</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> Never</span></div></pre></pre></pre><h3 class="heading3" id="리턴코드">리턴 코드</h3><ul><li>0 : 정상 종료</li></ul><h2 class="heading2" id="service">Service</h2><p class="paragraph">외부로 파드를 어떻게 서비스하면 좋을까?</p><h2 class="heading2" id="nodeport">Nodeport</h2><p class="paragraph">노드의 특정 포트를 매핑. 서비스를 생성하며 모든 노드의 특정 포트가 하나의 서비스에 매핑됨.</p><ul><li>Target Port : 컨테이너의 포트. target은 서비스 관점이므로...</li><li>Service Port : 서비스 포트. 클러스터IP에서 서비스되는 포트. 클러스터 IP는 랜덤으로 </li><li>Node Port : 클러스터 노드에서 서비스되는 포트. 30,000~32767까지 정의됨</li></ul><pre class="css-fkgcw9 ev1gfv90"><pre><pre class="prism-code language-yaml pre" style="color:#9CDCFE;background-color:#1E1E1E" p="3"><div class="token-line"><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> v1</span></div><div class="token-line"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> Service</span></div><div class="token-line"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> myapp</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">service</span></div><div class="token-line"><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> NodePort</span></div><div class="token-line"><span class="token plain">  </span><span class="token key atrule">ports</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token key atrule">targetPort</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">80</span><span class="token plain">    </span><span class="token comment" style="color:rgb(106, 153, 85)"># 컨테이너 포트</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">port</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">80</span><span class="token plain">          </span><span class="token comment" style="color:rgb(106, 153, 85)"># 서비스 포트. 작성하지 않으면 타겟포트와 등일하게 구성됨</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">nodePort</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">30008</span><span class="token plain">   </span><span class="token comment" style="color:rgb(106, 153, 85)"># 작성하지 않으면 범위네 랜덤</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token key atrule">selector</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">app</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> myapp</span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> front</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">end</span></div></pre></pre></pre><pre class="css-fkgcw9 ev1gfv90"><pre><pre class="prism-code language-yaml pre" style="color:#9CDCFE;background-color:#1E1E1E" p="3"><div class="token-line"><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> v1</span></div><div class="token-line"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> Pod</span></div><div class="token-line"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> myapp</span></div><div class="token-line"><span class="token plain">  </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> front</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">end</span></div><div class="token-line"><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token key atrule">containers</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> myapp</span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">image</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> nginx</span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div></pre></pre></pre><h2 class="heading2" id="clusterip">ClusterIP</h2><p class="paragraph">클러스터내에서 동일 포트 군을 하나의 가상 IP로 묶기 위한 리소스로, 클러스터내 IP레인지에서 할당한다. NodePort처럼 selector로 구성한다.</p><pre class="css-fkgcw9 ev1gfv90"><pre><pre class="prism-code language-yaml pre" style="color:#9CDCFE;background-color:#1E1E1E" p="3"><div class="token-line"><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> v1</span></div><div class="token-line"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> Service</span></div><div class="token-line"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> back</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">end</span></div><div class="token-line"><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> ClusterIP</span></div><div class="token-line"><span class="token plain">  </span><span class="token key atrule">ports</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token key atrule">targetPort</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">80</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">port</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">80</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token key atrule">selector</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">app</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> myapp</span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> back</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">end</span></div></pre></pre></pre><h2 class="heading2" id="loadbalancer-ingress">LoadBalancer - Ingress</h2><p class="paragraph">노드포트로 외부 접속을 지원하면 3만번대 이상의 포트로 서비스를 하게 된다. 고객이 매번 포트를 쳐야할까? 아니될 말씀이다. 그러면 어떤 방법이 있을까?
로드밸런서에서 가상ip로 80, 443포트를 받고, 뒷단의 노드포트 서비스로 트래픽을 던질 수 있겠다. 그런데 이렇게하면 서비스를 추가할 때마다 로드밸런서에서 포트를 추가해야 한다.
이걸 위해서 Ingress가 있다.
Ingress는 L7 로드밸런서다.</p><h3 class="heading3" id="ingresscontroller">Ingress Controller</h3><p class="paragraph">nginx, haproxy와 같은 실제 로드밸런서 도구이다. nginx와 nginx controller가 동일 제품..은 아니며 쿠버네티스 전용 빌드로 보면 되며, 구글에서 관리한다.
ingress controller를 배포로 구성</p><p class="paragraph">쿠버네티스 클러스터의 워크로드로 들어가는 네트워크 구성을 그려보면</p><p class="paragraph">service(ex. nodeport) -&gt; deployment(ingress contoller. ex) nginx ingress contoller) -&gt; <!-- -->[ingress resource 확인]<!-- --> -&gt; service -&gt; pod으로 라우팅</p><p class="paragraph">nginx ingress contoller의 구성은 다음과 같을 수 있다.</p><pre class="css-fkgcw9 ev1gfv90"><pre><pre class="prism-code language-yaml pre" style="color:#9CDCFE;background-color:#1E1E1E" p="3"><div class="token-line"><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> extensions</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain">v1beta1</span></div><div class="token-line"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> Deployment</span></div><div class="token-line"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> nginx</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">ingress</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">controller</span></div><div class="token-line"><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token key atrule">replicas</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token key atrule">selector</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">matchLabels</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> nginx</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">ingress</span></div><div class="token-line"><span class="token plain">  </span><span class="token key atrule">template</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token key atrule">labels</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> nginx</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">ingress</span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token key atrule">containers</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> nginx</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">ingress</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">controller</span></div><div class="token-line"><span class="token plain">          </span><span class="token key atrule">image</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> quay.io/kubernetes</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">ingress</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">contoller/nginx</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">ingress</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">contoller</span></div><div class="token-line"><span class="token plain">      </span><span class="token key atrule">args</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> /nginx</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">ingress</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">controller</span></div><div class="token-line"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">configmap=$(POD_NAMESPACE)/nginx</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">configuration</span></div><div class="token-line"><span class="token plain">      </span><span class="token key atrule">env</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">         </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> POD_NAME</span></div><div class="token-line"><span class="token plain">           </span><span class="token key atrule">valueFrom</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">             </span><span class="token key atrule">fieldFrom</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">               </span><span class="token key atrule">fieldRef</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">                 </span><span class="token key atrule">fieldPath</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> metadata.name</span></div><div class="token-line"><span class="token plain">         </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> POD_NAMEPSACE</span></div><div class="token-line"><span class="token plain">           </span><span class="token key atrule">valueFrom</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">             </span><span class="token key atrule">fieldRef</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">               </span><span class="token key atrule">fieldPath</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> metadata.namepsace</span></div><div class="token-line"><span class="token plain">      </span><span class="token key atrule">ports</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> http</span></div><div class="token-line"><span class="token plain">          </span><span class="token key atrule">containerPort</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">80</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> https</span></div><div class="token-line"><span class="token plain">          </span><span class="token key atrule">containerPort</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">443</span><span class="token plain"></span></div></pre></pre></pre><h3 class="heading3" id="ingressresources">Ingress Resources</h3><p class="paragraph">Ingress Controller에 정의된 서비스들의 설정한다.
Ingress Controller로 들어온 서비스를 wear-service로 보내는 Ingress Resources는 다음과 같다.</p><pre class="css-fkgcw9 ev1gfv90"><pre><pre class="prism-code language-yaml pre" style="color:#9CDCFE;background-color:#1E1E1E" p="3"><div class="token-line"><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> networking.k8s.io/v1</span></div><div class="token-line"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> Ingress</span></div><div class="token-line"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> ingress</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">wear</span></div><div class="token-line"><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token key atrule">backend</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">serviceName</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> wear</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">service </span><span class="token comment" style="color:rgb(106, 153, 85)">#진짜 서비스 네임</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">servicePort</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">80</span><span class="token plain"></span></div></pre></pre></pre><p class="paragraph">여기에 복수의 워크로드가 있다면 어떨까? /wear, /watch와 같이 복수의 백엔드가 구성되어 있다면?</p><pre class="css-fkgcw9 ev1gfv90"><pre><pre class="prism-code language-yaml pre" style="color:#9CDCFE;background-color:#1E1E1E" p="3"><div class="token-line"><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> networking.k8s.io/v1</span></div><div class="token-line"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> Ingress</span></div><div class="token-line"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> ingress</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">wear</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">watch</span></div><div class="token-line"><span class="token plain">  </span><span class="token key atrule">annotations</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">nginx.ingress.kubernetes.io/rewrite-target</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> / </span></div><div class="token-line"><span class="token plain">    </span><span class="token comment" style="color:rgb(106, 153, 85)">#rewrite-target이 없으면 뒤에 붙은 파라미터가 붙는다</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token comment" style="color:rgb(106, 153, 85)">#예를 들어 ingressservice:ingressport/servicepath로 접근할 경우</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token comment" style="color:rgb(106, 153, 85)">#         servicename:port로 접근하길 바란다.</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token comment" style="color:rgb(106, 153, 85)">#  하지만  servicename:port/servicepath로 접근하게 된다. </span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token comment" style="color:rgb(106, 153, 85)"># 이를 방지하기 위하여 rewrite시 target을 /로 만드는 것이 rewrite-target이다.</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token key atrule">rules</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token key atrule">host</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> wear.my</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">online</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">store.com  </span><span class="token comment" style="color:rgb(106, 153, 85)"># hostname에 대한 설정 가능</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">http</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token comment" style="color:rgb(106, 153, 85)"># ingress contoller port name</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">paths</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token key atrule">path</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> /wear   </span><span class="token comment" style="color:rgb(106, 153, 85)"># 패스가 없으면 호스트의 전체 트래픽을 서비스로 던진다</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token key atrule">pathType</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> Prefix</span></div><div class="token-line"><span class="token plain">      </span><span class="token key atrule">backend</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token key atrule">service</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">          </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> wear</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">service</span></div><div class="token-line"><span class="token plain">          </span><span class="token key atrule">port</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">            </span><span class="token key atrule">number</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">80</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token key atrule">path</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> /watch</span></div><div class="token-line"><span class="token plain">      </span><span class="token key atrule">backend</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token key atrule">serviceName</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> watch</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">service</span></div><div class="token-line"><span class="token plain">        </span><span class="token key atrule">servicePort</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">80</span><span class="token plain"></span></div></pre></pre></pre><p class="paragraph">1.20버전부터 다음과 같은 패턴으로 인그레스를 생성할 수 있게 되었다.</p><pre class="css-fkgcw9 ev1gfv90"><pre><pre class="prism-code language-bash pre" style="color:#9CDCFE;background-color:#1E1E1E" p="3"><div class="token-line"><span class="token plain">kubectl create ingress </span><span class="token operator" style="color:rgb(212, 212, 212)">&lt;</span><span class="token plain">ingress-name</span><span class="token operator" style="color:rgb(212, 212, 212)">&gt;</span><span class="token plain"> --rule</span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;host/path=service:port&quot;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">kubectl create ingress ingress-test --rule</span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;wear.my-online-store.com/wear*=wear-service:80&quot;</span><span class="token plain"></span></div></pre></pre></pre><p class="paragraph"><a href="https://kubernetes.io/docs/reference/generated/kubectl/kubectl-commands#-em-ingress-em-" target="_blank" rel="noopener noreferrer">https://kubernetes.io/docs/reference/generated/kubectl/kubectl-commands#-em-ingress-em-</a></p><h2 class="heading2" id="networkpolicy">network policy</h2><p class="paragraph">일반적응로 방화벽 룰이라고 부르는 바로 그것</p><h3 class="heading3" id="ingress&amp;egress">Ingress &amp; Egress</h3><p class="paragraph">아래와 같은 형태로 정의할 수 있다.</p><pre class="css-fkgcw9 ev1gfv90"><pre><pre class="prism-code language-yaml pre" style="color:#9CDCFE;background-color:#1E1E1E" p="3"><div class="token-line"><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> networking.k8s.io/v1</span></div><div class="token-line"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> NetworkPolicy</span></div><div class="token-line"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> db</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">policy</span></div><div class="token-line"><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token comment" style="color:rgb(106, 153, 85)">#누구에게</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token key atrule">podSelector</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">matchLabels</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token key atrule">role</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> db</span></div><div class="token-line"><span class="token plain">  </span><span class="token comment" style="color:rgb(106, 153, 85)">#어떤룰을 적용할 것인가?</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token key atrule">policyTypes</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> Ingress</span></div><div class="token-line"><span class="token plain">  </span><span class="token key atrule">ingerss</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token key atrule">from</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token key atrule">podSelector</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token key atrule">matchLabels</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">          </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> api</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">pod</span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">ports</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token key atrule">protocol</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> TCP</span></div><div class="token-line"><span class="token plain">      </span><span class="token key atrule">port</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">3306</span><span class="token plain"></span></div></pre></pre></pre><p class="paragraph">from에는 복수의 소스를 정의할 수 있는데 and 조건과 or조건으로 정의할 수 있다.</p><p class="paragraph"><strong>prod 네임스페이스의 api-pod</strong>에서 오는 트래픽, 즉 두 조건을 같이 걸고 싶은 경우는 하나의 아이템으로 선언한다.</p><pre class="css-fkgcw9 ev1gfv90"><pre><pre class="prism-code language-yaml pre" style="color:#9CDCFE;background-color:#1E1E1E" p="3"><div class="token-line" style="background-color:rgba(244, 67, 54, 0.2)"><span class="token punctuation" style="user-select:none;-moz-user-select:-moz-none;-webkit-user-select:none">-</span><span class="token plain"> </span><span class="token key atrule">ingress</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span></div><div class="token-line" style="background-color:rgba(244, 67, 54, 0.2)"><span class="token plain"></span><span class="token punctuation" style="user-select:none;-moz-user-select:-moz-none;-webkit-user-select:none">-</span><span class="token plain"> </span><span class="token key atrule">from</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token key atrule">namespaceSelector</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token key atrule">matchLabels</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> prod</span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">podSelector</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token key atrule">matchLabaels</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> api</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">pod    </span></div></pre></pre></pre><p class="paragraph"><strong>prod 네임스페이스에서 오거나 api-pod</strong>에서 오는 트래픽, 즉 두 조건 중 하나만 만족해도 되는 or 조건을 걸고 싶은 경우는 두개의 아이템으로 선언한다.</p><pre class="css-fkgcw9 ev1gfv90"><pre><pre class="prism-code language-yaml pre" style="color:#9CDCFE;background-color:#1E1E1E" p="3"><div class="token-line" style="background-color:rgba(244, 67, 54, 0.2)"><span class="token punctuation" style="user-select:none;-moz-user-select:-moz-none;-webkit-user-select:none">-</span><span class="token plain"> </span><span class="token key atrule">ingress</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span></div><div class="token-line" style="background-color:rgba(244, 67, 54, 0.2)"><span class="token plain"></span><span class="token punctuation" style="user-select:none;-moz-user-select:-moz-none;-webkit-user-select:none">-</span><span class="token plain"> </span><span class="token key atrule">from</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token key atrule">namespaceSelector</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token key atrule">matchLabels</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> prod</span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token key atrule">podSelector</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token key atrule">matchLabaels</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> api</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">pod    </span></div></pre></pre></pre><h2 class="heading2" id="volumes">Volumes</h2><h3 class="heading3" id="percistantvolume">Percistant Volume</h3><pre class="css-fkgcw9 ev1gfv90"><pre><pre class="prism-code language-yaml pre" style="color:#9CDCFE;background-color:#1E1E1E" p="3"><div class="token-line"><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> v1</span></div><div class="token-line"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> PersistentVolume</span></div><div class="token-line"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> pv</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">voll</span></div><div class="token-line"><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span></div><div class="token-line"><span class="token plain">  </span><span class="token key atrule">accessModes</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> ReadWriteOnce</span></div><div class="token-line"><span class="token plain">  </span><span class="token key atrule">capacity</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">storage</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> 1Gi</span></div><div class="token-line"><span class="token plain">  </span><span class="token key atrule">awsElasticBlockStore</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">volumeID</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">fsType</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> ext4</span></div></pre></pre></pre><h3 class="heading3" id="pv모드">PV 모드</h3><ul><li>ReadWriteOnce : 싱글 노드에 리드라이트로 마운트된다. pod가 같은 노드에서 돌고 있다면, 여러 pod에서 사용할 수 있지만...</li><li>ReadOnlyMany : 많은 노드에서 읽기만 가능한 볼륨</li><li>ReadWriteMany : 많은 노드에서 읽고 쓸 수 있는 볼륨</li></ul><h3 class="heading3" id="percistancvolumeclaim">Percistanc Volume Claim</h3><p class="paragraph">정의한 PV에서 땡겨옴. 필요한 용량만큼을 요청하고, PV에 충분한 용량이 있으면 할당한다. 필요한 용량이 없는 경우(다른 쪽에서 claim을 걸어서 사용 중인 경우) 용량이 생길 때 까지 claim 상태에 남는다.</p><pre class="css-fkgcw9 ev1gfv90"><pre><pre class="prism-code language-yaml pre" style="color:#9CDCFE;background-color:#1E1E1E" p="3"><div class="token-line"><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> v1</span></div><div class="token-line"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> PersistentVolumeClaim</span></div><div class="token-line"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token key atrule">myClaim</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token key atrule">accessModes</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> ReadWriteOnce</span></div><div class="token-line"><span class="token plain">  </span><span class="token key atrule">resources</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">requests</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token key atrule">storage</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> 500Mi</span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div></pre></pre></pre><h2 class="heading2" id="storageclass">StorageClass</h2><h3 class="heading3" id="staticprovisioning">Static provisioning</h3><p class="paragraph">필요할 때마다 스토리지 프로비져닝을 손으로 실시함
NFS를 붙인다? 직접 붙여서 각 노드에 연결
cloud를 사용한다? cloud의 스토리지 서비스를 연결</p><h3 class="heading3" id="dynamicprovisioning">Dynamic Provisioning</h3><p class="paragraph">동적으로 PV를 생성한다.
예를 들어 구글 클라우드의 스토리지를 사용한다고 하면 아래와 같이 연결할 수 있다.</p><ol><li>구글 스토리지에 대한 storageclass를 정의하고</li></ol><pre class="css-fkgcw9 ev1gfv90"><pre><pre class="prism-code language-yaml pre" style="color:#9CDCFE;background-color:#1E1E1E" p="3"><div class="token-line"><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> storage.k8s.io/v1</span></div><div class="token-line"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> StorageClass</span></div><div class="token-line"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> google</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">storage   </span><span class="token comment" style="color:rgb(106, 153, 85)"># 여기에서 스토리지 클래스 이름 선언</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token key atrule">provisioneer</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> kubernetes.io/gce</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">pd</span></div></pre></pre></pre><ol start="2"><li>pvc에서 해당 스토리지 클래스의 이름을 연결한 후 클레임을 걸면 된다
(pod은 pvc에 대한 연결이므로 이전과 등일)</li></ol><pre class="css-fkgcw9 ev1gfv90"><pre><pre class="prism-code language-yaml pre" style="color:#9CDCFE;background-color:#1E1E1E" p="3"><div class="token-line"><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> v1</span></div><div class="token-line"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> PersistentVolumeClaim</span></div><div class="token-line"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> myClaim</span></div><div class="token-line"><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token key atrule">accessMode</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> ReadWriteOnce</span></div><div class="token-line"><span class="token plain">  </span><span class="token key atrule">storageClassName</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> google</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">storage  </span><span class="token comment" style="color:rgb(106, 153, 85)"># 여기에 선언한 스토리지 클래스 이름 사용</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token key atrule">resources</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">requests</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token key atrule">storage</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> 500Mi</span></div></pre></pre></pre><p class="paragraph">즉, pvc만큼의 용량이 <strong>동적</strong>으로 프로비저닝되어 별도의 pv에 대한 정의를 하지 않아도 된다. PV가 <strong>자동으로 생성</strong>된다는 것이지, PV가 생성되지 않는다는 것은 아니다.</p><p class="paragraph">스토리지 클래스를 여러타입으로 정의해 두면 필요할 때마다 pvc만 정의하여 사용하면 된다. 예를 들어, hdd/ssd타입의 디스크로 서비스되는 스토리지 서비스를 사용할 때 각각을 스토리지 클래스로 정의해두고 pvc에서 필요한 storage class name을 가져다 쓰면 해당 타입의 디스크를 사용할 수 있다.</p><h2 class="heading2" id="statefulset">StatefulSet</h2><p class="paragraph">상태를 기억하고 있어야 하는 파드의 세트를 정의한다. 이때 접근을 위하여 headless service를 정의해준다.</p><pre class="css-fkgcw9 ev1gfv90"><pre><pre class="prism-code language-yaml pre" style="color:#9CDCFE;background-color:#1E1E1E" p="3"><div class="token-line"><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> apps/v1</span></div><div class="token-line"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> StatefulSet</span></div><div class="token-line"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> mysql</span></div><div class="token-line"><span class="token plain">  </span><span class="token key atrule">labels</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">app</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> mysql</span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token key atrule">template</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token key atrule">labels</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token key atrule">app</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> mysql</span></div><div class="token-line"><span class="token plain">      </span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token key atrule">containers</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> mysql</span></div><div class="token-line"><span class="token plain">          </span><span class="token key atrule">image</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> mysql</span></div><div class="token-line"><span class="token plain">  </span><span class="token key atrule">replicas</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">3</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token key atrule">selector</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">matchLabels</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token key atrule">app</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> mysql</span></div><div class="token-line"><span class="token plain">  </span><span class="token key atrule">serviceName</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> mysql</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">h</span></div><div class="token-line"><span class="token plain">  </span><span class="token key atrule">podManagementPolicy</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> Parallel</span></div></pre></pre></pre><h2 class="heading2" id="headlessservices">Headless Services</h2><p class="paragraph">mysql cluster service가 있다고 하자. 기본적으로 서비스는 로드밸런싱을 하기때문에 읽기 작업에 대해서는 동일하게 접근하여도 되지만 쓰기 작업이 필요할 때는 마스터에 접근이 필요하다. 개별 pod의 경우 ip.namespace.pod.cluster.local과 같은 엔드포인트로 접근이 가능하지만, ip는 생성될 때마다 변경된다.
이때 사용되는 것이 headless sevrice이다.
clusterIP가 None으로 지정하고 서비스의 name을 pod의 subdomain으로 지정해주면 된다.</p><pre class="css-fkgcw9 ev1gfv90"><pre><pre class="prism-code language-yaml pre" style="color:#9CDCFE;background-color:#1E1E1E" p="3"><div class="token-line"><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> v1</span></div><div class="token-line"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> Service</span></div><div class="token-line"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> mysql</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">h</span></div><div class="token-line"><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token key atrule">ports</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token key atrule">port</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">3306</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token key atrule">selector</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">app</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> mysql</span></div><div class="token-line"><span class="token plain">  </span><span class="token key atrule">clusterIP</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> None</span></div></pre></pre></pre><pre class="css-fkgcw9 ev1gfv90"><pre><pre class="prism-code language-yaml pre" style="color:#9CDCFE;background-color:#1E1E1E" p="3"><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> Pod</span></div><div class="token-line"><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">...</span><span class="token plain"> </span></div><div class="token-line"><span class="token plain">  </span><span class="token key atrule">subdomain</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> mysql</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">h  </span><span class="token comment" style="color:rgb(106, 153, 85)"># 여기를 잡아줘야된다.</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token key atrule">hostname</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> mysql</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">pod</span></div></pre></pre></pre><p class="paragraph">hostname.subdomain.svc.cluster.local의 형식으로 구성되며,
mysql-pod.mysql-h.default.svc.cluster.local이라는 도메인을 통해 해당 pod에 접근할 수 있다.</p><p class="paragraph">요거를 deployment로 묶으면</p><pre class="css-fkgcw9 ev1gfv90"><pre><pre class="prism-code language-yaml pre" style="color:#9CDCFE;background-color:#1E1E1E" p="3"><div class="token-line"><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> Deployment</span></div><div class="token-line"><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token key atrule">serivceName</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> mysql</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">h    </span><span class="token comment" style="color:rgb(106, 153, 85)"># opt1. mysql-0, 1, 2.mysql-h.default.svc.cluster.local로 headless service가 생성되어 접근</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token key atrule">replicas</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">3</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token key atrule">matchLabels</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">app</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> mysql</span></div><div class="token-line"><span class="token plain">  </span><span class="token key atrule">template</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> myapp</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">pod</span></div><div class="token-line"><span class="token plain">      </span><span class="token key atrule">labels</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token key atrule">app</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> mysql</span></div><div class="token-line"><span class="token plain">    </span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token key atrule">containers</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> mysql</span></div><div class="token-line"><span class="token plain">        </span><span class="token key atrule">image</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> mysql</span></div><div class="token-line"><span class="token plain">      </span><span class="token key atrule">subdomain</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> mysql</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">h    </span><span class="token comment" style="color:rgb(106, 153, 85)"># opt2. 3파드 모두 mysql-pod.mysql-h.default.svc.cluster.local로 접근</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token key atrule">hostname</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> mysql</span><span class="token punctuation" style="color:rgb(212, 212, 212)">-</span><span class="token plain">pod</span></div><div class="token-line"><span class="token plain" style="display:inline-block">
</span></div></pre></pre></pre><h2 class="heading2" id="참조">참조</h2><p class="paragraph">[1]<!-- --> 강의링크 :<br/>
<a href="https://www.udemy.com/course/certified-kubernetes-application-developer" target="_blank" rel="noopener noreferrer">https://www.udemy.com/course/certified-kubernetes-application-developer</a></p><p class="paragraph">[2]<!-- --> secrets : <a href="https://kubernetes.io/docs/concepts/configuration/secret/" target="_blank" rel="noopener noreferrer">https://kubernetes.io/docs/concepts/configuration/secret/</a></p><p class="paragraph">[3]<!-- --> <a href="https://kubernetes.io/docs/tasks/administer-cluster/manage-resources/memory-default-namespace/" target="_blank" rel="noopener noreferrer">https://kubernetes.io/docs/tasks/administer-cluster/manage-resources/memory-default-namespace/</a></p><p class="paragraph">[4]<!-- --> <a href="https://kubernetes.io/docs/tasks/configure-pod-container/assign-memory-resource" target="_blank" rel="noopener noreferrer">https://kubernetes.io/docs/tasks/configure-pod-container/assign-memory-resource</a></p></div><div class="addPaddTopBottom"><style data-emotion="css vqr4ny">.css-vqr4ny{margin:0px;padding:0px;width:auto;display:grid;grid-template-rows:auto;-webkit-column-gap:24px;column-gap:24px;grid-template-columns:calc(50% - 8px) calc(50% - 8px);}.css-vqr4ny .previousBtn{cursor:pointer;-moz-box-align:center;-moz-box-direction:normal;-moz-box-orient:horizontal;margin:0px;padding:0px;position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;place-self:stretch;border-radius:3px;border:1px solid rgb(230, 236, 241);-webkit-transition:border 200ms ease 0s;transition:border 200ms ease 0s;box-shadow:rgba(116, 129, 141, 0.1) 0px 3px 8px 0px;-webkit-text-decoration:none;text-decoration:none;background-color:#fff;color:#3B454E;}.css-vqr4ny .nextBtn{cursor:pointer;-moz-box-align:center;-moz-box-direction:normal;-moz-box-orient:horizontal;margin:0px;padding:0px;position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;place-self:stretch;border-radius:3px;border:1px solid rgb(230, 236, 241);-webkit-transition:border 200ms ease 0s;transition:border 200ms ease 0s;box-shadow:rgba(116, 129, 141, 0.1) 0px 3px 8px 0px;-webkit-text-decoration:none;text-decoration:none;background-color:#fff;color:#3B454E;}.css-vqr4ny .nextBtn:hover,.css-vqr4ny .previousBtn:hover{-webkit-text-decoration:none;text-decoration:none;border:1px solid #1ed3c6;}.css-vqr4ny .nextBtn:hover .rightArrow,.css-vqr4ny .previousBtn:hover .leftArrow{color:#1ed3c6;}.css-vqr4ny .leftArrow{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;margin:0px;color:rgb(157, 170, 182);-webkit-flex:0 0 auto;-ms-flex:0 0 auto;flex:0 0 auto;font-size:24px;-webkit-transition:color 200ms ease 0s;transition:color 200ms ease 0s;padding:16px;padding-right:16px;}.css-vqr4ny .rightArrow{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex:0 0 auto;-ms-flex:0 0 auto;flex:0 0 auto;font-size:24px;-webkit-transition:color 200ms ease 0s;transition:color 200ms ease 0s;padding:16px;padding-left:16px;margin:0px;color:rgb(157, 170, 182);}.css-vqr4ny .nextPreviousTitle{display:block;margin:0px;padding:0px;-webkit-transition:color 200ms ease 0s;transition:color 200ms ease 0s;}.css-vqr4ny .nextPreviousTitle span{font-size:16px;line-height:1.5;font-weight:500;}@media (max-width: 767px){.css-vqr4ny{display:block;padding:0 15px;}.css-vqr4ny .previousBtn{margin-bottom:20px;}}</style><div class="css-vqr4ny ex6i9xe0"><a class="previousBtn" href="/study/20220308-css"><div class="leftArrow"><svg preserveAspectRatio="xMidYMid meet" height="1em" width="1em" fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" class="_13gjrqj"><g><line x1="19" y1="12" x2="5" y2="12"></line><polyline points="12 19 5 12 12 5"></polyline></g></svg></div><div class="preRightWrapper"><div class="smallContent"><span>Previous</span></div><div class="nextPreviousTitle"><span>CSS 학습</span></div></div></a><a class="nextBtn" href="/study/2023-0402-CKAD-test"><div class="nextRightWrapper"><div class="smallContent"><span>Next</span></div><div class="nextPreviousTitle"><span>[CKAD] Kubernetes Certificate Application Developer(CKAD) with Tests 학습노트(1/)</span></div></div><div class="rightArrow"><svg preserveAspectRatio="xMidYMid meet" height="1em" width="1em" fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" class="_13gjrqj"><g><line x1="5" y1="12" x2="19" y2="12"></line><polyline points="12 5 19 12 12 19"></polyline></g></svg></div></a></div></div></div></main><style data-emotion="css nrfftn">.css-nrfftn{width:224px;}</style><div class="hiddenMobile css-nrfftn e1eqkayb0"><style data-emotion="css 1b5er25">.css-1b5er25{width:100%;border-right:1px solid #ede7f3;height:100vh;overflow:auto;position:fixed;padding-left:24px;position:-webkit-sticky;position:-moz-sticky;position:-webkit-sticky;position:sticky;top:0;background:#fff;}.css-1b5er25 .rightSideTitle{font-size:10px;line-height:1;font-weight:700;text-transform:uppercase;letter-spacing:1.2px;padding:7px 24px 7px 16px;border-left:1px solid #e6ecf1;border-left-color:rgb(230, 236, 241);color:#3B454E;}.css-1b5er25 .rightSideBarUL{margin-top:32px;}.css-1b5er25 .rightSideBarUL li{list-style-type:none;border-left:1px solid #e6ecf1;border-left-color:rgb(230, 236, 241);}.css-1b5er25 .rightSideBarUL li a{font-size:12px;font-weight:500;line-height:1.5;padding:7px 24px 7px 16px;color:#3B454E;}@media only screen and (max-width: 50rem){.css-1b5er25{width:100%;position:relative;}}</style><aside class="css-1b5er25 e1y52jk21"><ul class="rightSideBarUL"><li class="rightSideTitle">CONTENTS</li><style data-emotion="css g0grba">.css-g0grba{list-style:none;}.css-g0grba a{color:#5c6975;-webkit-text-decoration:none;text-decoration:none;font-weight:400;padding:0.45rem 0 0.45rem 3rem;display:block;position:relative;}.css-g0grba a:hover{color:#1ed3c6!important;}.css-g0grba a svg{float:right;margin-right:1rem;}</style><li class="css-g0grba e1y52jk20"><a href="#개요:ckad" to="#개요:ckad">개요 : CKAD</a></li><li class="css-g0grba e1y52jk20"><a href="#docker" to="#docker">Docker</a></li><li class="css-g0grba e1y52jk20"><a href="#commandandarguments" to="#commandandarguments">command and arguments</a></li><li class="css-g0grba e1y52jk20"><a href="#kubectledit실패관련" to="#kubectledit실패관련">kubectl edit 실패 관련</a></li><li class="css-g0grba e1y52jk20"><a href="#환경변수" to="#환경변수">환경변수</a></li><li class="css-g0grba e1y52jk20"><a href="#도커보안" to="#도커보안">도커 보안</a></li><li class="css-g0grba e1y52jk20"><a href="#serviceaccount" to="#serviceaccount">ServiceAccount</a></li><li class="css-g0grba e1y52jk20"><a href="#resource" to="#resource">Resource</a></li><li class="css-g0grba e1y52jk20"><a href="#taintsandtolerations" to="#taintsandtolerations">Taints and Tolerations</a></li><li class="css-g0grba e1y52jk20"><a href="#redinessandliveness" to="#redinessandliveness">rediness and liveness</a></li><li class="css-g0grba e1y52jk20"><a href="#logs" to="#logs">logs</a></li><li class="css-g0grba e1y52jk20"><a href="#monitoranddebug" to="#monitoranddebug">monitor and debug</a></li><li class="css-g0grba e1y52jk20"><a href="#job" to="#job">job</a></li><li class="css-g0grba e1y52jk20"><a href="#cronjob" to="#cronjob">CronJob</a></li><li class="css-g0grba e1y52jk20"><a href="#service" to="#service">Service</a></li><li class="css-g0grba e1y52jk20"><a href="#nodeport" to="#nodeport">Nodeport</a></li><li class="css-g0grba e1y52jk20"><a href="#clusterip" to="#clusterip">ClusterIP</a></li><li class="css-g0grba e1y52jk20"><a href="#loadbalancer-ingress" to="#loadbalancer-ingress">LoadBalancer - Ingress</a></li><li class="css-g0grba e1y52jk20"><a href="#networkpolicy" to="#networkpolicy">network policy</a></li><li class="css-g0grba e1y52jk20"><a href="#volumes" to="#volumes">Volumes</a></li><li class="css-g0grba e1y52jk20"><a href="#storageclass" to="#storageclass">StorageClass</a></li><li class="css-g0grba e1y52jk20"><a href="#statefulset" to="#statefulset">StatefulSet</a></li><li class="css-g0grba e1y52jk20"><a href="#headlessservices" to="#headlessservices">Headless Services</a></li><li class="css-g0grba e1y52jk20"><a href="#참조" to="#참조">참조</a></li></ul></aside></div></div></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/study/202230408-ckad2";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-4c5991a8599d38b13eff.js"],"app":["/app-d7fe63b823d7416d3b5d.js"],"component---src-templates-docs-js":[]};/*]]>*/</script><script src="/polyfill-4c5991a8599d38b13eff.js" nomodule=""></script><script src="/app-d7fe63b823d7416d3b5d.js" async=""></script><script src="/framework-bb601ffbbd122d5c0b0b.js" async=""></script><script src="/webpack-runtime-40d2b6db0d9a9a7357b7.js" async=""></script><script defer="">
            function navBarClose() {
              document.getElementById("navbar").classList.toggle("responsive");
            }
            document.addEventListener('click',function(e){
              if(e.target && e.target.tagName.toLowerCase() === 'a'){
                navBarClose();
              }
           });
            </script></body></html>